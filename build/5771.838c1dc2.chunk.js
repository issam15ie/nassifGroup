(self.webpackChunknassif_group_strapi=self.webpackChunknassif_group_strapi||[]).push([[5771],{4191:(L,O,t)=>{var n=t(87864),a=t(86386),r=t(45353),d=t(29884),u=t(74565),m=t(52689),c=t(48126),p=t(82388),v=t(82261);function C(j,M,f){M.length?M=n(M,function(y){return v(y)?function(R){return a(R,y.length===1?y[0]:y)}:y}):M=[p];var W=-1;M=n(M,m(r));var A=d(j,function(y,R,K){var z=n(M,function(F){return F(y)});return{criteria:z,index:++W,value:y}});return u(A,function(y,R){return c(y,R,f)})}L.exports=C},29404:(L,O,t)=>{"use strict";t.d(O,{w:()=>u});var n=t(92132),a=t(21272),r=t(94061),d=t(83997);const u=({children:m,spacing:c=2,horizontal:p=!1,...v})=>(0,n.jsx)(r.a,{paddingTop:2,paddingBottom:4,children:(0,n.jsx)(d.s,{as:"ol",gap:c,direction:p?"row":"column",alignItems:p?"center":"stretch",...v,children:a.Children.map(m,(C,j)=>(0,n.jsx)("li",{children:C},j))})})},29884:(L,O,t)=>{var n=t(97449),a=t(91522);function r(d,u){var m=-1,c=a(d)?Array(d.length):[];return n(d,function(p,v,C){c[++m]=u(p,v,C)}),c}L.exports=r},32091:(L,O,t)=>{"use strict";t.d(O,{X:()=>y});var n=t(92132),a=t(21272),r=t(60678),d=t(94929),u=t(34353),m=t(84175);const c=R=>{const K=(0,a.useRef)();return(0,a.useEffect)(()=>{K.current=R}),K.current};var p=t(48653),v=t(94061),C=t(75244),j=t(7297),M=t(83997),f=t(30893),W=t(88353);const A=(0,d.Ay)(p.c)`
  width: ${24/16}rem;
  background-color: ${({theme:R})=>R.colors.neutral200};
`,y=({as:R="h2",label:K,searchLabel:z="",searchable:F=!1,onChange:Q=()=>{},value:b="",onClear:tt=()=>{},onSubmit:w=()=>{},id:it})=>{const[Y,lt]=(0,a.useState)(!1),pt=c(Y),Et=(0,m.B)(it),nt=(0,a.useRef)(void 0),k=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{Y&&nt.current&&nt.current.focus(),pt&&!Y&&k.current&&k.current.focus()},[Y,pt]);const H=()=>{lt(X=>!X)},rt=X=>{tt(X),nt.current.focus()},dt=X=>{X.relatedTarget?.id!==Et&&lt(!1)},Mt=X=>{X.key===u.K.ESCAPE&&lt(!1)};return Y?(0,n.jsxs)(v.a,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,n.jsx)(C.B,{children:(0,n.jsx)(j.S,{name:"searchbar",value:b,onChange:Q,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:Mt,ref:nt,onBlur:dt,onClear:rt,onSubmit:w,clearLabel:"Clear",size:"S",children:z})}),(0,n.jsx)(v.a,{paddingLeft:2,paddingTop:4,children:(0,n.jsx)(A,{})})]}):(0,n.jsxs)(v.a,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,n.jsxs)(M.s,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(f.o,{variant:"beta",as:R,children:K}),F&&(0,n.jsx)(W.K,{ref:k,onClick:H,label:z,icon:(0,n.jsx)(r.A,{})})]}),(0,n.jsx)(v.a,{paddingTop:4,children:(0,n.jsx)(A,{})})]})}},41156:(L,O,t)=>{"use strict";t.d(O,{C:()=>m});var n=t(92132),a=t(94929),r=t(90151);const d=`${232/16}rem`,u=(0,a.Ay)(r.x)`
  width: ${d};
  background: ${({theme:c})=>c.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:c})=>c.colors.neutral200};
  z-index: 1;
`,m=({ariaLabel:c,...p})=>(0,n.jsx)(u,{"aria-label":c,as:"nav",...p})},41231:(L,O,t)=>{"use strict";t.d(O,{A:()=>r});var n=t(92132);const a=d=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...d,children:(0,n.jsx)("path",{fill:"#8E8EA9",d:"M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"})}),r=a},42455:(L,O,t)=>{"use strict";t.d(O,{P:()=>m});var n=t(92132),a=t(94929),r=t(94061);const d=(0,a.Ay)(r.a)`
  display: grid;
  grid-template-columns: ${({hasSideNav:c})=>c?"auto 1fr":"1fr"};
`,u=(0,a.Ay)(r.a)`
  overflow-x: hidden;
`,m=({sideNav:c,children:p})=>(0,n.jsxs)(d,{hasSideNav:Boolean(c),children:[c,(0,n.jsx)(u,{paddingBottom:10,children:p})]})},45635:(L,O,t)=>{var n=t(87212),a=t(4191),r=t(39226),d=t(3956),u=r(function(m,c){if(m==null)return[];var p=c.length;return p>1&&d(m,c[0],c[1])?c=[]:p>2&&d(c[0],c[1],c[2])&&(c=[c[0]]),a(m,n(c,1),[])});L.exports=u},48126:(L,O,t)=>{var n=t(64958);function a(r,d,u){for(var m=-1,c=r.criteria,p=d.criteria,v=c.length,C=u.length;++m<v;){var j=n(c[m],p[m]);if(j){if(m>=C)return j;var M=u[m];return j*(M=="desc"?-1:1)}}return r.index-d.index}L.exports=a},60655:(L,O,t)=>{"use strict";t.d(O,{A:()=>r});var n=t(92132);const a=d=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 4 4",...d,children:(0,n.jsx)("rect",{width:4,height:4,fill:"#A5A5BA",rx:2})}),r=a},63996:(L,O,t)=>{"use strict";t.d(O,{u:()=>M});var n=t(92132),a=t(21272),r=t(60655),d=t(94929),u=t(94061),m=t(30893),c=t(83997),p=t(85329);const v=(0,d.Ay)(u.a)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:f})=>f.colors.neutral800};
  svg > * {
    fill: ${({theme:f})=>f.colors.neutral600};
  }

  &.active {
    ${({theme:f})=>`
      background-color: ${f.colors.primary100};
      border-right: 2px solid ${f.colors.primary600};
      svg > * {
        fill: ${f.colors.primary700};
      }
      ${m.o} {
        color: ${f.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,C=(0,d.Ay)(r.A)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:f,$active:W})=>W?f.colors.primary600:f.colors.neutral600};
  }
`,j=d.Ay.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,M=a.forwardRef(({children:f,icon:W=null,withBullet:A=!1,as:y=p.s,isSubSectionChild:R=!1,...K},z)=>(0,n.jsxs)(v,{as:y,icon:W,background:"neutral100",paddingLeft:R?9:7,paddingBottom:2,paddingTop:2,ref:z,...K,children:[(0,n.jsxs)(c.s,{children:[W?(0,n.jsx)(j,{children:W}):(0,n.jsx)(C,{}),(0,n.jsx)(u.a,{paddingLeft:2,children:(0,n.jsx)(m.o,{as:"span",children:f})})]}),A&&(0,n.jsx)(u.a,{as:c.s,paddingRight:4,children:(0,n.jsx)(C,{$active:!0})})]}))},64871:(L,O,t)=>{"use strict";t.d(O,{N:()=>j});var n=t(92132),a=t(21272),r=t(14595),d=t(71389),u=t(94929),m=t(78732),c=t(30893),p=t(94061);const v=u.Ay.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:M})=>M?"none":void 0};
  color: ${({disabled:M,theme:f})=>M?f.colors.neutral600:f.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${c.o} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:M})=>M.colors.primary500};
  }

  &:active {
    color: ${({theme:M})=>M.colors.primary700};
  }

  ${m.AP};
`,C=(0,u.Ay)(p.a)`
  display: flex;
`,j=a.forwardRef(({children:M,href:f,to:W,disabled:A=!1,startIcon:y,endIcon:R,...K},z)=>{const F=f?"_blank":void 0,Q=f?"noreferrer noopener":void 0;return(0,n.jsxs)(v,{as:W&&!A?d.k2:"a",target:F,rel:Q,to:A?void 0:W,href:A?"#":f,disabled:A,ref:z,...K,children:[y&&(0,n.jsx)(C,{as:"span","aria-hidden":!0,paddingRight:2,children:y}),(0,n.jsx)(c.o,{children:M}),R&&!f&&(0,n.jsx)(C,{as:"span","aria-hidden":!0,paddingLeft:2,children:R}),f&&(0,n.jsx)(C,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,n.jsx)(r.A,{})})]})})},64958:(L,O,t)=>{var n=t(91662);function a(r,d){if(r!==d){var u=r!==void 0,m=r===null,c=r===r,p=n(r),v=d!==void 0,C=d===null,j=d===d,M=n(d);if(!C&&!M&&!p&&r>d||p&&v&&j&&!C&&!M||m&&v&&j||!u&&j||!c)return 1;if(!m&&!p&&!M&&r<d||M&&u&&c&&!m&&!p||C&&u&&c||!v&&c||!j)return-1}return 0}L.exports=a},74565:L=>{function O(t,n){var a=t.length;for(t.sort(n);a--;)t[a]=t[a].value;return t}L.exports=O},75821:(L,O,t)=>{var n=t(91522);function a(r,d){return function(u,m){if(u==null)return u;if(!n(u))return r(u,m);for(var c=u.length,p=d?c:-1,v=Object(u);(d?p--:++p<c)&&m(v[p],p,v)!==!1;);return u}}L.exports=a},87419:(L,O,t)=>{"use strict";t.d(O,{L:()=>W});var n=t(92132),a=t(21272),r=t(94929),d=t(9005),u=t(83997),m=t(94061),c=t(30893);const p=(0,r.Ay)(u.s)`
  border: none;
  padding: 0;
  background: transparent;
`,v=r.Ay.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:A})=>A?"0deg":"180deg"});
`,C=({collapsable:A=!1,label:y,onClick:R=()=>{},ariaExpanded:K,ariaControls:z})=>A?(0,n.jsxs)(p,{as:"button",onClick:R,"aria-expanded":K,"aria-controls":z,textAlign:"left",children:[(0,n.jsx)(m.a,{paddingRight:1,children:(0,n.jsx)(c.o,{variant:"sigma",textColor:"neutral600",children:y})}),A&&(0,n.jsx)(v,{rotated:K,children:(0,n.jsx)(d.A,{"aria-hidden":!0})})]}):(0,n.jsx)(p,{children:(0,n.jsx)(m.a,{paddingRight:1,children:(0,n.jsx)(c.o,{variant:"sigma",textColor:"neutral600",children:y})})});var j=t(84175),M=t(10573);const f=(0,r.Ay)(m.a)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:A})=>A.colors.neutral500};
    }
  }
`,W=({collapsable:A=!1,label:y,badgeLabel:R,children:K,id:z})=>{const[F,Q]=(0,a.useState)(!0),b=(0,j.B)(z),tt=()=>{Q(w=>!w)};return(0,n.jsxs)(u.s,{direction:"column",alignItems:"stretch",gap:1,children:[(0,n.jsx)(f,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,n.jsxs)(m.a,{position:"relative",paddingRight:R?6:0,children:[(0,n.jsx)(C,{onClick:tt,ariaExpanded:F,ariaControls:b,collapsable:A,label:y}),R&&(0,n.jsx)(M.E,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:R})]})}),(!A||F)&&(0,n.jsx)("ol",{id:b,children:a.Children.map(K,(w,it)=>(0,n.jsx)("li",{children:w},it))})]})}},95771:(L,O,t)=>{"use strict";t.r(O),t.d(O,{SettingsPage:()=>Mn});var n=t(92132),a=t(21272),r=t(94061),d=t(85963),u=t(19307),m=t(37789),c=t(1844),p=t(76547),v=t(52358),C=t(33468),j=t(98915),M=t(5239),f=t(11196),W=t(7981),A=t(48653),y=t(7153),R=t(74447),K=t(10229),z=t(90151),F=t(68074),Q=t(58805),b=t(88353),tt=t(42455),w=t(4198),it=t(55356),Y=t(64871),lt=t(43064),pt=t(38413),Et=t(61485),nt=t(99248),k=t(67030),H=t(83997),rt=t(12408),dt=t(24093),Mt=t(12081),X=t(7537),N=t(30893),U=t(56445),$t=t(14718),V=t(54894),ct=t(17703),Ft=t(71389),J=t(59057),Nt=t(45635),yt=t(82437),jt=t(97927),_t=t(41156),Gt=t(32091),Vt=t(63996),Ht=t(87419),Zt=t(29404),Xt=t(54514),At=t(14595),Qt=t(41231),Yt=t(99576),Jt=t(5194),bt=t(70603),e=t(33544),Rt=t(94929),Tt=t(74930),xt=t(88761),wt=t(59080),xn=t(15126),fn=t(63299),On=t(67014),vn=t(79275),Pn=t(61535),Dn=t(5790),Ln=t(12083),Cn=t(41286),yn=t(35223),jn=t(5409),An=t(2600),Rn=t(48940),Tn=t(55151),Bn=t(79077),In=t(51187);const kt=o=>o.map(s=>{const l=s.links.map(i=>({...i,isDisplayed:!1}));return{...s,links:l}}),qt=()=>{const[{isLoading:o,menu:s},l]=a.useState({isLoading:!0,menu:[]}),{allPermissions:i}=(0,U.r5)(),{shouldUpdateStrapi:h}=(0,U.Xe)(),{settings:P}=(0,U.vD)(),T=(0,yt.d4)(jt.s),D=a.useMemo(()=>(0,J.Q)(),[]),{admin:E,global:g}=(0,J.p)(D,async()=>(await t.e(8215).then(t.bind(t,48215))).SETTINGS_LINKS_EE(),{combine(x,S){return{admin:[...S.admin,...x.admin],global:[...x.global,...S.global]}},defaultValue:{admin:[],global:[]}}),I=a.useCallback(x=>{if(!x.id)throw new Error("The settings menu item must have an id attribute.");return{...x,permissions:T.settings?.[x.id]?.main??[]}},[T.settings]);return a.useEffect(()=>{const x=async()=>{const Z=await(ot=>Promise.all(ot.reduce((et,ut,mt)=>{const B=ut.links.map(async(at,q)=>({hasPermission:await(0,U.v$)(i,at.permissions),sectionIndex:mt,linkIndex:q}));return[...et,...B]},[])))(G);l(ot=>({...ot,isLoading:!1,menu:G.map((et,ut)=>({...et,links:et.links.map((mt,B)=>{const at=Z.find(q=>q.sectionIndex===ut&&q.linkIndex===B);return{...mt,isDisplayed:Boolean(at?.hasPermission)}})}))}))},{global:S,..._}=P,G=kt([{...S,links:Nt([...S.links,...g.map(I)],$=>$.id).map($=>({...$,hasNotification:$.id==="000-application-infos"&&h}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:E.map(I)},...Object.values(_)]);x()},[E,g,i,P,h,I]),{isLoading:o,menu:s.map(x=>({...x,links:x.links.filter(S=>S.isDisplayed)}))}},tn=(0,Rt.Ay)(Q.I)`
  right: 15px;
  position: absolute;
`,Bt=({menu:o})=>{const{formatMessage:s}=(0,V.A)(),{trackUsage:l}=(0,U.z1)(),{pathname:i}=(0,ct.zy)(),P=o.filter(E=>!E.links.every(g=>g.isDisplayed===!1)).map(E=>({...E,title:E.intlLabel,links:E.links.map(g=>({...g,title:g.intlLabel,name:g.id}))})),T=s({id:"global.settings",defaultMessage:"Settings"}),D=(E=null)=>{l("willNavigate",{from:i,to:E})};return(0,n.jsxs)(_t.C,{ariaLabel:T,children:[(0,n.jsx)(Gt.X,{label:T}),(0,n.jsx)(Zt.w,{children:P.map(E=>(0,n.jsx)(Ht.L,{label:s(E.intlLabel),children:E.links.map(g=>(0,n.jsxs)(Vt.u,{as:Ft.k2,withBullet:g.hasNotification,to:g.to,onClick:()=>D(g.to),children:[s(g.intlLabel),g?.lockIcon&&(0,n.jsx)(tn,{width:`${15/16}rem`,height:`${15/16}rem`,as:Qt.A})]},g.id))},E.id))})]})};Bt.propTypes={menu:e.array.isRequired};const nn=[{async Component(){return await t.e(5619).then(t.bind(t,58e3))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(740),t.e(982)]).then(t.bind(t,80982))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(740),t.e(982)]).then(t.bind(t,80982))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(740),t.e(5827)]).then(t.bind(t,25827))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(4288).then(t.bind(t,54288)).then(s=>s.i)},to:"/settings/users",exact:!0},{async Component(){return await t.e(6122).then(t.bind(t,86122))},to:"/settings/users/:id",exact:!0},{async Component(){return await Promise.all([t.e(8757),t.e(7243)]).then(t.bind(t,57243))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await Promise.all([t.e(8757),t.e(522)]).then(t.bind(t,70522))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(865).then(t.bind(t,60865))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(3986).then(t.bind(t,73986))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(2062),t.e(712),t.e(241)]).then(t.bind(t,30241))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(2062),t.e(712),t.e(1837)]).then(t.bind(t,11837))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(2062),t.e(9115)]).then(t.bind(t,9115))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(4361).then(t.bind(t,34361))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4712),t.e(2062),t.e(8677)]).then(t.bind(t,88677))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(5264).then(t.bind(t,35264))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(9573).then(t.bind(t,49573))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(2614).then(t.bind(t,12614))},to:"/settings/purchase-single-sign-on",exact:!0}],st=750,gt=100,It=["image/jpeg","image/png","image/svg+xml"],Ut={localImage:void 0},sn=(o=Ut,s)=>(0,xt.Ay)(o,l=>{switch(s.type){case"SET_LOCAL_IMAGE":{l.localImage=s.value;break}default:return l}}),ft=({onChangeLogo:o,customLogo:s,goTo:l,Component:i,modalTitle:h,next:P,prev:T,currentStep:D})=>{const[{localImage:E},g]=(0,a.useReducer)(sn,Ut),{formatMessage:I}=(0,V.A)(),x=_=>{g({type:"SET_LOCAL_IMAGE",value:_})},S=()=>{l(null)};return D?(0,n.jsxs)(Et.k,{labelledBy:"modal",onClose:S,children:[(0,n.jsx)(nt.r,{children:(0,n.jsx)(N.o,{fontWeight:"bold",as:"h2",id:"modal",children:I(h)})}),(0,n.jsx)(i,{setLocalImage:x,goTo:l,next:P,prev:T,onClose:S,asset:E||s,onChangeLogo:o})]}):null};ft.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},ft.propTypes={Component:e.elementType,currentStep:e.string,customLogo:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}),goTo:e.func.isRequired,modalTitle:e.shape({id:e.string,defaultMessage:e.string}),next:e.string,onChangeLogo:e.func.isRequired,prev:e.string};const St={currentStep:void 0},on=(o=St,s)=>(0,xt.Ay)(o,l=>{switch(s.type){case"GO_TO":{l.currentStep=s.to;break}default:return l}}),en={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Wt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},an=o=>new Promise(s=>{const l=new FileReader;l.onload=()=>{const i=new Image;i.onload=function(){s({width:i.width,height:i.height})},i.src=l.result},l.readAsDataURL(o)}),ln=(o,s)=>({ext:o.name.split(".").pop(),size:o.size/1e3,name:o.name,url:URL.createObjectURL(o),rawFile:o,width:s.width,height:s.height}),Kt=async o=>{let s;if(!It.includes(o.type))throw s=new Error("File format"),s.displayMessage=en,s;const i=await an(o);if(!(i.width<=st&&i.height<=st))throw s=new Error("File sizing"),s.displayMessage=Wt,s;const P=ln(o,i);if(!(P.size<=gt))throw s=new Error("File sizing"),s.displayMessage=Wt,s;return P},rn=(0,Rt.Ay)(R.T)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,Ot=({setLocalImage:o,goTo:s,next:l,onClose:i})=>{const{formatMessage:h}=(0,V.A)(),[P,T]=(0,a.useState)(!1),[D,E]=(0,a.useState)(void 0),g=(0,a.useRef)(null),I=()=>T(!0),x=()=>T(!1),S=$=>{$.preventDefault(),g.current.click()},_=async()=>{x();const $=g.current.files[0];if($)try{const Z=await Kt($);o(Z),s(l)}catch(Z){if(Z.displayMessage)E(h(Z.displayMessage,{size:gt,dimension:st})),g.current.focus();else throw Z}},G=()=>P?"primary500":D?"danger600":"neutral300";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{children:(0,n.jsx)(r.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(y.D,{name:"logo-upload",error:D,children:(0,n.jsx)("label",{htmlFor:"logo-upload",children:(0,n.jsxs)(H.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,n.jsxs)(H.s,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:P?"primary100":"neutral100",borderColor:G(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:I,onDragLeave:x,children:[(0,n.jsx)(Q.I,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Yt.A,"aria-hidden":!0}),(0,n.jsx)(r.a,{paddingTop:3,paddingBottom:5,children:(0,n.jsx)(N.o,{variant:"delta",as:"span",children:h({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"})})}),(0,n.jsx)(rn,{accept:It,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:_,ref:g,id:"logo-upload"}),(0,n.jsx)(d.$,{type:"button",onClick:S,children:h({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})}),(0,n.jsx)(r.a,{paddingTop:6,children:(0,n.jsx)(N.o,{variant:"pi",textColor:"neutral600",children:h({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:gt,dimension:st})})})]}),(0,n.jsx)(K.b,{})]})})})})}),(0,n.jsx)(k.j,{startActions:(0,n.jsx)(d.$,{onClick:i,variant:"tertiary",children:h({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})})})]})};Ot.defaultProps={next:null},Ot.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const dn=async o=>{try{const{get:s}=(0,U.GD)(),l=await s(o,{responseType:"blob",timeout:8e3});return new File([l.data],l.config.url,{type:l.headers["content-type"]})}catch(s){throw s.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},s}},vt=({goTo:o,next:s,onClose:l,setLocalImage:i})=>{const{formatMessage:h}=(0,V.A)(),[P,T]=(0,a.useState)(""),[D,E]=(0,a.useState)(null),g=x=>{T(x.target.value)},I=async()=>{try{const x=await dn(P),S=await Kt(x);i(S),o(s)}catch(x){if(x.displayMessage)E(h(x.displayMessage,{size:gt,dimension:st}));else throw x}};return(0,n.jsxs)("form",{onSubmit:x=>{x.preventDefault(),I()},children:[(0,n.jsx)(r.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(X.k,{label:h({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:D,onChange:g,value:P,name:"logo-url"})}),(0,n.jsx)(k.j,{startActions:(0,n.jsx)(d.$,{onClick:l,variant:"tertiary",children:h({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(d.$,{type:"submit",children:h({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"})})})]})};vt.defaultProps={next:null},vt.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const Pt=({setLocalImage:o,goTo:s,next:l,onClose:i})=>{const{formatMessage:h}=(0,V.A)();return(0,n.jsxs)(Mt.f,{label:h({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple",children:[(0,n.jsxs)(r.a,{paddingLeft:8,paddingRight:8,children:[(0,n.jsxs)(rt.t,{children:[(0,n.jsx)(rt.o,{children:h({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})}),(0,n.jsx)(rt.o,{children:h({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"})})]}),(0,n.jsx)(A.c,{})]}),(0,n.jsxs)(dt.T,{children:[(0,n.jsx)(dt.K,{children:(0,n.jsx)(Ot,{onClose:i,setLocalImage:o,goTo:s,next:l})}),(0,n.jsx)(dt.K,{children:(0,n.jsx)(vt,{onClose:i,setLocalImage:o,goTo:s,next:l})})]})]})};Pt.defaultProps={next:null},Pt.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const zt=({asset:o})=>{const{formatMessage:s}=(0,V.A)();return(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(C.a,{children:(0,n.jsx)(m.P,{size:"S",src:o.url})}),(0,n.jsxs)(p.b,{children:[(0,n.jsxs)(v.W,{children:[(0,n.jsx)(j.Z,{children:o.name}),(0,n.jsx)(j.j,{children:`${o.ext.toUpperCase()} - ${o.width}\u2715${o.height}`})]}),(0,n.jsx)(c.S,{children:s({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"})})]})]})};zt.propTypes={asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired};const Dt=({onClose:o,asset:s,prev:l,next:i,goTo:h,setLocalImage:P,onChangeLogo:T})=>{const{formatMessage:D}=(0,V.A)(),E=()=>{P(void 0),h(l)},g=()=>{T(s),h(i)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.a,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:[(0,n.jsxs)(H.s,{justifyContent:"space-between",paddingBottom:6,children:[(0,n.jsxs)(H.s,{direction:"column",alignItems:"flex-start",children:[(0,n.jsx)(N.o,{variant:"pi",fontWeight:"bold",children:D({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})}),(0,n.jsx)(N.o,{variant:"pi",textColor:"neutral500",children:D({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"})})]}),(0,n.jsx)(d.$,{onClick:E,variant:"secondary",children:D({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"})})]}),(0,n.jsx)(r.a,{maxWidth:(0,U.a8)(180),children:s.url?(0,n.jsx)(zt,{asset:s}):null})]}),(0,n.jsx)(k.j,{startActions:(0,n.jsx)(d.$,{onClick:o,variant:"tertiary",children:D({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(d.$,{onClick:g,children:D({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"})})})]})};Dt.defaultProps={next:null,prev:null},Dt.propTypes={goTo:e.func.isRequired,asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired,next:e.string,onClose:e.func.isRequired,onChangeLogo:e.func.isRequired,prev:e.string,setLocalImage:e.func.isRequired};const cn={upload:{Component:Pt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Dt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},ht=({canUpdate:o,customLogo:s,defaultLogo:l,hint:i,label:h,onChangeLogo:P,onResetLogo:T})=>{const[{currentStep:D},E]=(0,a.useReducer)(on,St),{Component:g,next:I,prev:x,modalTitle:S}=cn[D]||{},{formatMessage:_}=(0,V.A)(),G=$=>{E({type:"GO_TO",to:$})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{label:h,selectedSlide:0,hint:i,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:s?.name||"logo.png",actions:(0,n.jsxs)(f.O,{children:[(0,n.jsx)(b.K,{disabled:!o,onClick:()=>G(s?"pending":"upload"),label:_({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:(0,n.jsx)(Jt.A,{})}),s&&(0,n.jsx)(b.K,{disabled:!o,onClick:T,label:_({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:(0,n.jsx)(bt.A,{})})]}),children:(0,n.jsx)(W.o,{label:_({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"}),children:(0,n.jsx)(r.a,{maxHeight:"40%",maxWidth:"40%",as:"img",src:s?.url||l,alt:_({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})})})}),(0,n.jsx)(ft,{Component:g,currentStep:D,onChangeLogo:P,customLogo:s,goTo:G,next:I,prev:x,modalTitle:S})]})};ht.defaultProps={canUpdate:!1,customLogo:null,hint:null},ht.propTypes={canUpdate:e.bool,customLogo:e.shape({url:e.string,name:e.string}),label:e.string.isRequired,hint:e.string,defaultLogo:e.string.isRequired,onChangeLogo:e.func.isRequired,onResetLogo:e.func.isRequired};const gn=(o,s)=>wt(o,{menuLogo:{display:s.menuLogo},authLogo:{display:s.authLogo}}),Lt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},un=(o=Lt,s)=>(0,xt.Ay)(o,l=>{switch(s.type){case"SET_CUSTOM_MENU_LOGO":{l.menuLogo.display=s.value,l.menuLogo.submit.rawFile=s.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{l.authLogo.display=s.value,l.authLogo.submit.rawFile=s.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{l.menuLogo.display=null,l.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{l.authLogo.display=null,l.authLogo.submit={rawFile:null,isReset:!0};break}default:return l}}),Ct=(0,a.forwardRef)(({canUpdate:o,projectSettingsStored:s},l)=>{const{formatMessage:i}=(0,V.A)(),{trackUsage:h}=(0,U.z1)(),{logos:{menu:P,auth:T}}=(0,J.u)(),[{menuLogo:D,authLogo:E},g]=(0,a.useReducer)(un,Lt,()=>gn(Lt,s)),I=G=>{g({type:"SET_CUSTOM_MENU_LOGO",value:G})},x=()=>{h("didClickResetLogo",{logo:"menu"}),g({type:"RESET_CUSTOM_MENU_LOGO"})},S=G=>{g({type:"SET_CUSTOM_AUTH_LOGO",value:G})},_=()=>{h("didClickResetLogo",{logo:"auth"}),g({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,a.useImperativeHandle)(l,()=>({getValues:()=>({menuLogo:D.submit,authLogo:E.submit})})),(0,n.jsxs)(r.a,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(N.o,{variant:"delta",as:"h3",children:i({id:"Settings.application.customization",defaultMessage:"Customization"})}),(0,n.jsx)(N.o,{variant:"pi",textColor:"neutral600",children:i({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:st,size:gt})}),(0,n.jsxs)(z.x,{paddingTop:4,gap:4,children:[(0,n.jsx)(F.E,{col:6,s:12,children:(0,n.jsx)(ht,{canUpdate:o,customLogo:D.display,defaultLogo:P.default,hint:i({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:i({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:I,onResetLogo:x})}),(0,n.jsx)(F.E,{col:6,s:12,children:(0,n.jsx)(ht,{canUpdate:o,customLogo:E.display,defaultLogo:T.default,hint:i({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:i({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:S,onResetLogo:_})})]})]})});Ct.defaultProps={canUpdate:!1,projectSettingsStored:null},Ct.propTypes={canUpdate:e.bool,projectSettingsStored:e.shape({menuLogo:e.shape({url:e.string,name:e.string})})};const mn=o=>{const s=new FormData;return Object.entries(o).forEach(([l,i])=>{i&&i.rawFile instanceof File&&s.append(l,i.rawFile),i&&i.isReset&&s.append(l,null)}),s},pn=()=>null,hn=()=>{const o=a.useRef(),s=(0,U.hN)(),{trackUsage:l}=(0,U.z1)(),{formatMessage:i}=(0,V.A)(),{get:h,post:P}=(0,U.ry)(),{updateProjectSettings:T}=(0,J.u)(),D=(0,yt.d4)(jt.s),{formatAPIError:E}=(0,U.wq)(),{communityEdition:g,latestStrapiReleaseTag:I,nodeVersion:x,shouldUpdateStrapi:S,strapiVersion:_}=(0,U.Xe)(),G=(0,J.p)(pn,async()=>(await t.e(4765).then(t.bind(t,44765))).AdminSeatInfoEE),{allowedActions:{canRead:$,canUpdate:Z}}=(0,U.ec)(D.settings["project-settings"]);(0,U.L4)();const{data:ot,isLoading:et}=(0,Tt.useQuery)(["project-settings"],async()=>{const{data:B}=await h("/admin/project-settings");return B},{cacheTime:0,enabled:$,select(B){return{...B,authLogo:B.authLogo?{...B.authLogo,url:(0,U.vX)(B.authLogo.url)}:B.authLogo,menuLogo:B.menuLogo?{...B.menuLogo,url:(0,U.vX)(B.menuLogo.url)}:B.menuLogo}}}),ut=(0,Tt.useMutation)(B=>P("/admin/project-settings",B,{headers:{"Content-Type":"multipart/form-data"}}),{onError(B){s({type:"warning",message:E(B)})},async onSuccess(B){const{menuLogo:at,authLogo:q}=B;T({menuLogo:at?.url,authLogo:q?.url}),at?.rawFile&&l("didChangeLogo",{logo:"menu"}),q?.rawFile&&l("didChangeLogo",{logo:"auth"}),s({type:"success",message:i({id:"app",defaultMessage:"Saved"})})}}),mt=B=>{B.preventDefault(),ut.mutate(mn(o.current.getValues()))};return G?(0,n.jsxs)(tt.P,{children:[(0,n.jsx)(U.x7,{name:"Application"}),(0,n.jsx)(pt.g,{children:et?(0,n.jsx)(lt.a,{children:i({id:"Settings.application.isLoading",defaultMessage:"Loading"})}):(0,n.jsxs)("form",{onSubmit:mt,children:[(0,n.jsx)(it.Q,{title:i({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:i({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:Z&&(0,n.jsx)(d.$,{type:"submit",startIcon:(0,n.jsx)(Xt.A,{}),children:i({id:"global.save",defaultMessage:"Save"})})}),(0,n.jsx)(w.s,{children:(0,n.jsxs)(H.s,{direction:"column",alignItems:"stretch",gap:6,children:[(0,n.jsxs)(H.s,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(N.o,{variant:"delta",as:"h3",children:i({id:"global.details",defaultMessage:"Details"})}),(0,n.jsxs)(z.x,{gap:5,as:"dl",children:[(0,n.jsxs)(F.E,{col:6,s:12,children:[(0,n.jsx)(N.o,{variant:"sigma",textColor:"neutral600",as:"dt",children:i({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})}),(0,n.jsxs)(H.s,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsxs)(N.o,{children:["v",_]}),S&&(0,n.jsx)(Y.N,{href:`https://github.com/strapi/strapi/releases/tag/${I}`,isExternal:!0,endIcon:(0,n.jsx)(At.A,{}),children:i({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})})]})]}),(0,n.jsxs)(F.E,{col:6,s:12,children:[(0,n.jsx)(N.o,{variant:"sigma",textColor:"neutral600",as:"dt",children:i({id:"Settings.application.edition-title",defaultMessage:"current plan"})}),(0,n.jsxs)(H.s,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsx)(N.o,{children:i({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:g})}),(0,n.jsx)(Y.N,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:(0,n.jsx)(At.A,{}),children:i({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})})]})]}),(0,n.jsxs)(F.E,{col:6,s:12,children:[(0,n.jsx)(N.o,{variant:"sigma",textColor:"neutral600",as:"dt",children:i({id:"Settings.application.node-version",defaultMessage:"node version"})}),(0,n.jsx)(N.o,{as:"dd",children:x})]}),(0,n.jsx)(G,{})]})]}),$&&ot&&(0,n.jsx)(Ct,{canUpdate:Z,ref:o,projectSettingsStored:ot})]})})]})})]}):null};function En(o){return o.filter((s,l,i)=>i.findIndex(h=>h.key===s.key)===l)}function Mn(){const{settingId:o}=(0,ct.g)(),{settings:s}=(0,U.vD)(),{formatMessage:l}=(0,V.A)(),{isLoading:i,menu:h}=qt(),P=(0,J.p)(nn,async()=>(await t.e(7887).then(t.bind(t,67887))).ROUTES_EE,{combine(E,g){return[...E,...g]},defaultValue:[]}),T=a.useMemo(()=>En(P.map(({to:E,Component:g,exact:I})=>(0,J.d)(g,E,I))),[P]),D=Object.values(s).flatMap(E=>{const{links:g}=E;return g.map(I=>(0,J.d)(I.Component,I.to,I.exact||!1))});return i?(0,n.jsx)(U.Bl,{}):o?(0,n.jsxs)(tt.P,{sideNav:(0,n.jsx)(Bt,{menu:h}),children:[(0,n.jsx)($t.m,{title:l({id:"global.settings",defaultMessage:"Settings"})}),(0,n.jsxs)(ct.dO,{children:[(0,n.jsx)(ct.qh,{path:"/settings/application-infos",component:hn,exact:!0}),T,D]})]}):(0,n.jsx)(ct.rd,{to:"/settings/application-infos"})}},97449:(L,O,t)=>{var n=t(85373),a=t(75821),r=a(n);L.exports=r}}]);
