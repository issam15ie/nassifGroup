"use strict";(self.webpackChunknassif_group_strapi=self.webpackChunknassif_group_strapi||[]).push([[4863],{25271:(k,y,s)=>{s.d(y,{a:()=>P,s:()=>S});var e=s(12083),d=s(56445);const g={firstname:e.Yj().trim().required(d.iW.required),lastname:e.Yj(),email:e.Yj().email(d.iW.email).lowercase().required(d.iW.required),username:e.Yj().nullable(),password:e.Yj().min(8,d.iW.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number"),confirmPassword:e.Yj().min(8,d.iW.minLength).oneOf([e.KR("password"),null],"components.Input.error.password.noMatch").when("password",(l,f)=>l?f.required(d.iW.required):f)},S={...g,currentPassword:e.Yj().when(["password","confirmPassword"],(l,f,D)=>l||f?D.required(d.iW.required):D),preferedLanguage:e.Yj().nullable()},U={roles:e.YO().min(1,d.iW.required).required(d.iW.required)},P=e.Ik().shape({...g,isActive:e.lc(),...U})},94863:(k,y,s)=>{s.r(y),s.d(y,{ProfilePage:()=>oe});var e=s(92132),d=s(21272),g=s(94061),S=s(85963),U=s(88875),P=s(90151),l=s(68074),f=s(4198),D=s(55356),q=s(11273),N=s(38413),x=s(83997),A=s(48323),z=s(7537),T=s(30893),i=s(56445),ee=s(54514),B=s(83925),K=s(93337),se=s(61535),ae=s(39404),H=s(14718),I=s(54894),Y=s(74930),Q=s(94929),te=s(12083),Z=s(59057),V=s(97927),ne=s(25271),ve=s(15126),je=s(63299),we=s(67014),ye=s(59080),Te=s(79275),Ie=s(82437),Ce=s(5790),Re=s(41286),We=s(35223),Se=s(5409),Ue=s(2600),Be=s(48940),Ke=s(55151),Ye=s(79077),be=s(51187);const re=te.Ik().shape(ne.s),oe=()=>{const{changeLocale:a,localeNames:c}=(0,Z.M)(),{setUserDisplayName:m}=(0,i.Xe)(),{formatMessage:t}=(0,I.A)(),{trackUsage:r}=(0,i.z1)(),_=(0,i.hN)(),{lockApp:o,unlockApp:L}=(0,i.MA)(),{notifyStatus:v}=(0,q.W)(),{currentTheme:$,themes:p,onChangeTheme:h}=(0,Z.P)(),{get:G,put:ce}=(0,i.ry)();(0,i.L4)();const{isLoading:me,data:j,refetch:ue}=(0,Y.useQuery)("user",async()=>{const{data:n}=await G("/admin/users/me");return n.data},{onSuccess(){v(t({id:"Settings.profile.form.notify.data.loaded",defaultMessage:"Your profile data has been loaded"}))},onError(){_({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),{isLoading:ge,data:_e}=(0,Y.useQuery)(["providers","isSSOLocked"],async()=>{const{data:{data:n}}=await G("/admin/providers/isSSOLocked");return n},{enabled:window.strapi.isEE&&window.strapi.features.isEnabled("sso"),onError(){_({type:"warning",message:{id:"Settings.permissions.users.sso.provider.error"}})}}),fe=me||ge,J=(0,Y.useMutation)(async n=>{const{confirmPassword:O,currentTheme:E,...M}=n;let u=M;if((R=>"password"in R)(u)&&u.password===""){const{password:R,currentPassword:W,...F}=u;u=F}const{data:w}=await ce("/admin/users/me",u);return{...w.data,currentTheme:E}},{async onSuccess(n){await ue();const{email:O,firstname:E,lastname:M,username:u,preferedLanguage:C}=n;i.j2.setUserInfo({email:O,firstname:E,lastname:M,username:u,preferedLanguage:C});const w=n.username||(0,V.g)(n.firstname??"",n.lastname);m(w),n.preferedLanguage&&a(n.preferedLanguage),h(n.currentTheme),r("didChangeMode",{newMode:n.currentTheme}),_({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}})},async onSettled(){L()}}),{isLoading:pe}=J,he=async(n,{setErrors:O})=>{o();const E=n.username;J.mutate({...n,username:E},{onError(M){const u=M?.response?.data;return u?.data?O(u.data):_({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};if(fe||!j)return(0,e.jsxs)(N.g,{"aria-busy":"true",children:[(0,e.jsx)(H.m,{title:t({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),(0,e.jsx)(D.Q,{title:t({id:"Settings.profile.form.section.profile.page.title",defaultMessage:"Profile page"})}),(0,e.jsx)(f.s,{children:(0,e.jsx)(i.Bl,{})})]});const Ee=_e?.isSSOLocked??!1,{email:Me,firstname:Pe,lastname:Oe,username:De,preferedLanguage:xe}=j,Ae={email:Me,firstname:Pe,lastname:Oe,username:De,preferedLanguage:xe,currentTheme:$,confirmPassword:"",password:""};return(0,e.jsxs)(N.g,{"aria-busy":pe,children:[(0,e.jsx)(H.m,{title:t({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),(0,e.jsx)(se.l1,{onSubmit:he,initialValues:Ae,validateOnChange:!1,validationSchema:re,enableReinitialize:!0,children:({errors:n,values:{email:O,firstname:E,lastname:M,username:u,preferedLanguage:C,currentTheme:w,...R},handleChange:W,isSubmitting:F,dirty:Le})=>(0,e.jsxs)(i.lV,{children:[(0,e.jsx)(D.Q,{title:j.username||(0,V.g)(j.firstname??"",j.lastname),primaryAction:(0,e.jsx)(S.$,{startIcon:(0,e.jsx)(ee.A,{}),loading:F,type:"submit",disabled:!Le,children:t({id:"global.save",defaultMessage:"Save"})})}),(0,e.jsx)(g.a,{paddingBottom:10,children:(0,e.jsx)(f.s,{children:(0,e.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:6,children:[(0,e.jsx)(le,{errors:n,onChange:W,values:{firstname:E,lastname:M,username:u,email:O}}),!Ee&&(0,e.jsx)(ie,{errors:n,onChange:W,values:R}),(0,e.jsx)(de,{allApplicationThemes:p,onChange:W,values:{preferedLanguage:C,currentTheme:w},localeNames:c})]})})})]})})]})},ie=({errors:a,onChange:c,values:m})=>{const{formatMessage:t}=(0,I.A)(),[r,_]=d.useState(!1),[o,L]=d.useState(!1),[v,$]=d.useState(!1);return(0,e.jsx)(g.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsx)(T.o,{variant:"delta",as:"h2",children:t({id:"global.change-password",defaultMessage:"Change password"})}),(0,e.jsx)(P.x,{gap:5,children:(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(z.k,{error:a.currentPassword?t({id:a.currentPassword,defaultMessage:a.currentPassword}):"",onChange:c,value:m.currentPassword,label:t({id:"Auth.form.currentPassword.label",defaultMessage:"Current Password"}),name:"currentPassword",type:r?"text":"password",endAction:(0,e.jsx)(b,{onClick:p=>{p.stopPropagation(),_(h=>!h)},label:t(r?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"}),children:r?(0,e.jsx)(B.A,{}):(0,e.jsx)(K.A,{})})})})}),(0,e.jsxs)(P.x,{gap:5,children:[(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(X,{error:a.password?t({id:a.password,defaultMessage:a.password}):"",onChange:c,value:m.password,label:t({id:"global.password",defaultMessage:"Password"}),name:"password",type:o?"text":"password",autoComplete:"new-password",endAction:(0,e.jsx)(b,{onClick:p=>{p.stopPropagation(),L(h=>!h)},label:t(o?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"}),children:o?(0,e.jsx)(B.A,{}):(0,e.jsx)(K.A,{})})})}),(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(X,{error:a.confirmPassword?t({id:a.confirmPassword,defaultMessage:a.confirmPassword}):"",onChange:c,value:m.confirmPassword,label:t({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),name:"confirmPassword",type:v?"text":"password",autoComplete:"new-password",endAction:(0,e.jsx)(b,{onClick:p=>{p.stopPropagation(),$(h=>!h)},label:t(v?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"}),children:v?(0,e.jsx)(B.A,{}):(0,e.jsx)(K.A,{})})})})]})]})})},X=(0,Q.Ay)(z.k)`
  ::-ms-reveal {
    display: none;
  }
`,b=(0,Q.Ay)(U.T)`
  svg {
    height: ${(0,i.a8)(16)};
    width: ${(0,i.a8)(16)};
    path {
      fill: ${({theme:a})=>a.colors.neutral600};
    }
  }
`,de=({onChange:a,values:c,localeNames:m,allApplicationThemes:t={}})=>{const{formatMessage:r}=(0,I.A)(),_=Object.keys(t).filter(o=>t[o]);return(0,e.jsx)(g.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:1,children:[(0,e.jsx)(T.o,{variant:"delta",as:"h2",children:r({id:"Settings.profile.form.section.experience.title",defaultMessage:"Experience"})}),(0,e.jsx)(T.o,{children:r({id:"Settings.profile.form.section.experience.interfaceLanguageHelp",defaultMessage:"Preference changes will apply only to you. More information is available {here}."},{here:(0,e.jsx)(g.a,{as:"a",color:"primary600",target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#locales",children:r({id:"Settings.profile.form.section.experience.here",defaultMessage:"here"})})})})]}),(0,e.jsxs)(P.x,{gap:5,children:[(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(A.Z,{label:r({id:"Settings.profile.form.section.experience.interfaceLanguage",defaultMessage:"Interface language"}),placeholder:r({id:"global.select",defaultMessage:"Select"}),hint:r({id:"Settings.profile.form.section.experience.interfaceLanguage.hint",defaultMessage:"This will only display your own interface in the chosen language."}),onClear:()=>{a({target:{name:"preferedLanguage",value:null}})},clearLabel:r({id:"Settings.profile.form.section.experience.clear.select",defaultMessage:"Clear the interface language selected"}),value:c.preferedLanguage,onChange:o=>{a({target:{name:"preferedLanguage",value:o}})},children:Object.entries(m).map(([o,L])=>(0,e.jsx)(A.eY,{value:o,children:L},o))})}),(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsxs)(A.Z,{label:r({id:"Settings.profile.form.section.experience.mode.label",defaultMessage:"Interface mode"}),placeholder:r({id:"components.Select.placeholder",defaultMessage:"Select"}),hint:r({id:"Settings.profile.form.section.experience.mode.hint",defaultMessage:"Displays your interface in the chosen mode."}),value:c.currentTheme,onChange:o=>{a({target:{name:"currentTheme",value:o}})},children:[(0,e.jsx)(A.eY,{value:"system",children:r({id:"Settings.profile.form.section.experience.mode.option-system-label",defaultMessage:"Use system settings"})}),_.map(o=>(0,e.jsx)(A.eY,{value:o,children:r({id:"Settings.profile.form.section.experience.mode.option-label",defaultMessage:"{name} mode"},{name:r({id:o,defaultMessage:ae(o)})})},o))]})})]})]})})},le=({errors:a,onChange:c,values:m})=>{const{formatMessage:t}=(0,I.A)();return(0,e.jsx)(g.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsx)(T.o,{variant:"delta",as:"h2",children:t({id:"global.profile",defaultMessage:"Profile"})}),(0,e.jsxs)(P.x,{gap:5,children:[(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.firstname.label",defaultMessage:"First name"},error:a.firstname,onChange:c,value:m.firstname,type:"text",name:"firstname",required:!0})}),(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.lastname.label",defaultMessage:"Last name"},error:a.lastname,onChange:c,value:m.lastname,type:"text",name:"lastname"})}),(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.email.label",defaultMessage:"Email"},error:a.email,onChange:c,value:m.email,type:"email",name:"email",required:!0})}),(0,e.jsx)(l.E,{s:12,col:6,children:(0,e.jsx)(i.ah,{intlLabel:{id:"Auth.form.username.label",defaultMessage:"Username"},error:a.username,onChange:c,value:m.username,type:"text",name:"username"})})]})]})})}}}]);
