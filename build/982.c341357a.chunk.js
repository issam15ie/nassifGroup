"use strict";(self.webpackChunknassif_group_strapi=self.webpackChunknassif_group_strapi||[]).push([[982],{80982:(ts,c,s)=>{s.r(c),s.d(c,{CreatePage:()=>v,default:()=>F});var t=s(92132),m=s(21272),d=s(94061),g=s(85963),B=s(90151),h=s(68074),I=s(4198),W=s(55356),f=s(38413),l=s(83997),T=s(7537),U=s(5287),C=s(30893),i=s(56445),u=s(46270),K=s(6103),j=s(61535),p=s(77965),x=s(54894),y=s(82437),R=s(17703),S=s(94929),$=s(97927),E=s(60740),M=s(12083),as=s(74930),es=s(55151),is=s(79077),ns=s(59057),os=s(15126),ds=s(63299),_s=s(67014),ls=s(59080),rs=s(79275),Es=s(14718),Ms=s(5790),Ds=s(41286),Ps=s(35223),Os=s(5409),cs=s(2600),ms=s(48940),gs=s(51187),hs=s(412),Cs=s(45635),Rs=s(94710),vs=s(39404),As=s(36676),Ls=s(57505);const N=M.Ik().shape({name:M.Yj().required(i.iW.required),description:M.Yj().required(i.iW.required)}),z=S.Ay.div`
  border: 1px solid ${({theme:a})=>a.colors.primary200};
  background: ${({theme:a})=>a.colors.primary100};
  padding: ${({theme:a})=>`${a.spaces[2]} ${a.spaces[4]}`};
  color: ${({theme:a})=>a.colors.primary600};
  border-radius: ${({theme:a})=>a.borderRadius};
  font-size: ${12/16}rem;
  font-weight: bold;
`,v=()=>{const a=(0,R.W5)("/settings/roles/duplicate/:id"),A=(0,i.hN)(),{lockApp:V,unlockApp:Y}=(0,i.MA)(),{formatMessage:e}=(0,x.A)(),[Q,D]=(0,m.useState)(!1),{replace:G}=(0,R.W6)(),P=(0,m.useRef)(),{trackUsage:r}=(0,i.z1)(),{post:H,put:J}=(0,i.ry)(),{params:_}=a??{},{isLoading:X,data:Z}=(0,E.u)(_?.id,{cacheTime:0}),{permissions:b,isLoading:k}=(0,E.a)({id:_?.id},{cacheTime:0,enabled:!!_?.id}),w=O=>{V(),D(!0),_?.id?r("willDuplicateRole"):r("willCreateNewRole"),Promise.resolve(H("/admin/roles",O)).then(async({data:n})=>{const{permissionsToSend:o}=P.current.getPermissions();return _?.id?r("didDuplicateRole"):r("didCreateNewRole"),n.data.id&&!p(o)&&await J(`/admin/roles/${n.data.id}/permissions`,{permissions:o}),n}).then(n=>{D(!1),A({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),G(`/settings/roles/${n.data.id}`)}).catch(n=>{console.error(n),D(!1),A({type:"warning",message:{id:"notification.error"}})}).finally(()=>{Y()})},q=`${e({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${(0,K.A)(new Date,"PPP")}`;return(0,t.jsxs)(f.g,{children:[(0,t.jsx)(i.x7,{name:"Roles"}),(0,t.jsx)(j.l1,{initialValues:{name:"",description:q},onSubmit:w,validationSchema:N,validateOnChange:!1,children:({handleSubmit:O,values:n,errors:o,handleReset:ss,handleChange:L})=>(0,t.jsx)(i.lV,{noValidate:!0,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.Q,{primaryAction:(0,t.jsxs)(l.s,{gap:2,children:[(0,t.jsx)(g.$,{variant:"secondary",onClick:()=>{ss(),P.current.resetForm()},size:"L",children:e({id:"app.components.Button.reset",defaultMessage:"Reset"})}),(0,t.jsx)(g.$,{onClick:O,loading:Q,size:"L",children:e({id:"global.save",defaultMessage:"Save"})})]}),title:e({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:e({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:(0,t.jsx)(i.N_,{startIcon:(0,t.jsx)(u.A,{}),to:"/settings/roles",children:e({id:"global.back",defaultMessage:"Back"})})}),(0,t.jsx)(I.s,{children:(0,t.jsxs)(l.s,{direction:"column",alignItems:"stretch",gap:6,children:[(0,t.jsx)(d.a,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0,children:(0,t.jsxs)(l.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,t.jsxs)(l.s,{justifyContent:"space-between",children:[(0,t.jsxs)(d.a,{children:[(0,t.jsx)(d.a,{children:(0,t.jsx)(C.o,{fontWeight:"bold",children:e({id:"global.details",defaultMessage:"Details"})})}),(0,t.jsx)(d.a,{children:(0,t.jsx)(C.o,{variant:"pi",textColor:"neutral600",children:e({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})})})]}),(0,t.jsx)(z,{children:e({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0})})]}),(0,t.jsxs)(B.x,{gap:4,children:[(0,t.jsx)(h.E,{col:6,children:(0,t.jsx)(T.k,{name:"name",error:o.name&&e({id:o.name}),label:e({id:"global.name",defaultMessage:"Name"}),onChange:L,required:!0,value:n.name})}),(0,t.jsx)(h.E,{col:6,children:(0,t.jsx)(U.T,{label:e({id:"global.description",defaultMessage:"Description"}),id:"description",error:o.description&&e({id:o.description}),onChange:L,children:n.description})})]})]})}),!X&&!k?(0,t.jsx)(d.a,{shadow:"filterShadow",hasRadius:!0,children:(0,t.jsx)(E.P,{isFormDisabled:!1,ref:P,permissions:b,layout:Z})}):(0,t.jsx)(d.a,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0,children:(0,t.jsx)(i.Bl,{})})]})})]})})})]})};function F(){const a=(0,y.d4)($.s);return(0,t.jsx)(i.kz,{permissions:a.settings.roles.create,children:(0,t.jsx)(v,{})})}}}]);
