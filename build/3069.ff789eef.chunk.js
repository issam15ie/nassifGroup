(self.webpackChunknassif_group_strapi=self.webpackChunknassif_group_strapi||[]).push([[3069],{501:(g,h,s)=>{var e=s(52196),t=s(88765);function o(r,a,p){return r&&r.length?(a=p||a===void 0?1:t(a),e(r,0,a<0?0:a)):[]}g.exports=o},4191:(g,h,s)=>{var e=s(87864),t=s(86386),o=s(45353),r=s(29884),a=s(74565),p=s(52689),c=s(48126),x=s(82388),j=s(82261);function D(L,E,m){E.length?E=e(E,function(A){return j(A)?function(C){return t(C,A.length===1?A[0]:A)}:A}):E=[x];var M=-1;E=e(E,p(o));var O=r(L,function(A,C,w){var U=e(E,function(b){return b(A)});return{criteria:U,index:++M,value:A}});return a(O,function(A,C){return c(A,C,m)})}g.exports=D},6223:(g,h,s)=>{var e=s(60759),t=s(39226),o=s(56793),r=t(function(a,p){return o(a)?e(a,p):[]});g.exports=r},13069:(g,h,s)=>{"use strict";s.r(h),s.d(h,{default:()=>ds});var e=s(92132),t=s(56445),o=s(17703),r=s(27985),a=s(21272),p=s(57237),c=s(44604),x=s(60888),j=s(94061),D=s(85963),L=s(4181),E=s(90151),m=s(68074),M=s(88353),O=s(42455),A=s(74773),C=s(4198),w=s(55356),U=s(64871),b=s(11273),N=s(38413),R=s(83997),k=s(35513),G=s(25641),q=s(26127),H=s(90361),V=s(33363),ee=s(7537),re=s(5287),B=s(30893),se=s(98765),de=s(46270),ce=s(54514),ue=s(20415),ge=s(41909),pe=s(5194),oe=s(50612),te=s(61535),z=s(54894),Z=s(74930),$=s(33544),We=s(39404),fe=s(45635),ae=s(2600),ne=s(94929),Me=s(88761),he=s(77965),be=s(6223),Ke=s(34542),$e=s(61468),Pe=s(48940),Se=s(501),me=s(12083);const je=(0,a.createContext)({}),De=({children:n,value:i})=>(0,e.jsx)(je.Provider,{value:i,children:n}),_e=()=>(0,a.useContext)(je);De.propTypes={children:$.node.isRequired,value:$.object.isRequired};function Ne(n){switch(n){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return We(n.replace("api::","").replace("plugin::",""))}}const we=(n,i)=>{const l=Object.keys(i).sort().map(d=>({name:d,isOpen:!1}));return{...n,collapses:l}},ye=(0,ne.AH)`
  background: ${n=>n.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Fe=(0,ne.Ay)(j.a)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${n=>n.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${n=>n.isActive&&ye}
  &:hover {
    ${ye}
  }
`,Ge=ne.Ay.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:n})=>n.colors.neutral150};
`,Oe=({subCategory:n})=>{const{formatMessage:i}=(0,z.A)(),{onChange:l,onChangeSelectAll:d,onSelectedAction:f,selectedAction:u,modifiedData:P}=_e(),v=(0,a.useMemo)(()=>ae(P,n.name,{}),[P,n]),y=(0,a.useMemo)(()=>Object.values(v).every(_=>_.enabled===!0),[v]),T=(0,a.useMemo)(()=>Object.values(v).some(_=>_.enabled===!0)&&!y,[v,y]),I=(0,a.useCallback)(({target:{name:_}})=>{d({target:{name:_,value:!y}})},[y,d]),W=(0,a.useCallback)(_=>u===_,[u]);return(0,e.jsxs)(j.a,{children:[(0,e.jsxs)(R.s,{justifyContent:"space-between",alignItems:"center",children:[(0,e.jsx)(j.a,{paddingRight:4,children:(0,e.jsx)(B.o,{variant:"sigma",textColor:"neutral600",children:n.label})}),(0,e.jsx)(Ge,{}),(0,e.jsx)(j.a,{paddingLeft:4,children:(0,e.jsx)(L.S,{name:n.name,value:y,onValueChange:_=>I({target:{name:n.name,value:_}}),indeterminate:T,children:i({id:"app.utils.select-all",defaultMessage:"Select all"})})})]}),(0,e.jsx)(R.s,{paddingTop:6,paddingBottom:6,children:(0,e.jsx)(E.x,{gap:2,style:{flex:1},children:n.actions.map(_=>{const K=`${_.name}.enabled`;return(0,e.jsx)(m.E,{col:6,children:(0,e.jsxs)(Fe,{isActive:W(_.name),padding:2,hasRadius:!0,children:[(0,e.jsx)(L.S,{value:ae(P,K,!1),name:K,onValueChange:F=>l({target:{name:K,value:F}}),children:_.label}),(0,e.jsxs)("button",{type:"button",onClick:()=>f(_.name),style:{display:"inline-flex",alignItems:"center"},children:[(0,e.jsx)(se.s,{as:"span",children:i({id:"app.utils.show-bound-route",defaultMessage:"Show bound route for {route}"},{route:_.name})}),(0,e.jsx)(ue.A,{})]})]})},_.name)})})})]})};Oe.propTypes={subCategory:$.object.isRequired};const Ae=({name:n,permissions:i})=>{const l=(0,a.useMemo)(()=>fe(Object.values(i.controllers).reduce((d,f,u)=>{const P=`${n}.controllers.${Object.keys(i.controllers)[u]}`,v=fe(Object.keys(f).reduce((y,T)=>[...y,{...f[T],label:T,name:`${P}.${T}`}],[]),"label");return[...d,{actions:v,label:Object.keys(i.controllers)[u],name:P}]},[]),"label"),[n,i]);return(0,e.jsx)(j.a,{padding:6,children:l.map(d=>(0,e.jsx)(Oe,{subCategory:d},d.name))})};Ae.propTypes={name:$.string.isRequired,permissions:$.object.isRequired};const ze={collapses:[]},Ve=(n,i)=>(0,Me.Ay)(n,l=>{switch(i.type){case"TOGGLE_COLLAPSE":{l.collapses=n.collapses.map((d,f)=>f===i.index?{...d,isOpen:!d.isOpen}:{...d,isOpen:!1});break}default:return l}}),He=()=>{const{modifiedData:n}=_e(),{formatMessage:i}=(0,z.A)(),[{collapses:l},d]=(0,a.useReducer)(Ve,ze,u=>we(u,n)),f=u=>d({type:"TOGGLE_COLLAPSE",index:u});return(0,e.jsx)(R.s,{direction:"column",alignItems:"stretch",gap:1,children:l.map((u,P)=>(0,e.jsxs)(p.n,{expanded:u.isOpen,onToggle:()=>f(P),variant:P%2===0?"secondary":void 0,children:[(0,e.jsx)(x.P,{title:Ne(u.name),description:i({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:u.name}),variant:P%2?"primary":"secondary"}),(0,e.jsx)(c.u,{children:(0,e.jsx)(Ae,{permissions:n[u.name],name:u.name})})]},u.name))})},ke=n=>{switch(n){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Qe=(0,ne.Ay)(j.a)`
  margin: -1px;
  border-radius: ${({theme:n})=>n.spaces[1]} 0 0 ${({theme:n})=>n.spaces[1]};
`;function xe({route:n}){const{formatMessage:i}=(0,z.A)(),{method:l,handler:d,path:f}=n,u=f?$e(f.split("/")):[],[P="",v=""]=d?d.split("."):[],y=ke(n.method);return(0,e.jsxs)(R.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsxs)(B.o,{variant:"delta",as:"h3",children:[i({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",(0,e.jsx)("span",{children:P}),(0,e.jsxs)(B.o,{variant:"delta",textColor:"primary600",children:[".",v]})]}),(0,e.jsxs)(R.s,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0,children:[(0,e.jsx)(Qe,{background:y.background,borderColor:y.border,padding:2,children:(0,e.jsx)(B.o,{fontWeight:"bold",textColor:y.text,children:l})}),(0,e.jsx)(j.a,{paddingLeft:2,paddingRight:2,children:Ke(u,T=>(0,e.jsxs)(B.o,{textColor:T.includes(":")?"neutral600":"neutral900",children:["/",T]},T))})]})]})}xe.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},xe.propTypes={route:$.shape({handler:$.string,method:$.string,path:$.string})};const Ye=()=>{const{formatMessage:n}=(0,z.A)(),{selectedAction:i,routes:l}=_e(),d=be(i.split("."),"controllers"),f=ae(l,d[0]),u=d.slice(1).join("."),P=he(f)?[]:f.filter(v=>v.handler.endsWith(u));return(0,e.jsx)(m.E,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"},children:i?(0,e.jsx)(R.s,{direction:"column",alignItems:"stretch",gap:2,children:P.map((v,y)=>(0,e.jsx)(xe,{route:v},y))}):(0,e.jsxs)(R.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsx)(B.o,{variant:"delta",as:"h3",children:n({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})}),(0,e.jsx)(B.o,{as:"p",textColor:"neutral600",children:n({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"})})]})})},Ze=(n,i,l)=>({...n,initialData:i,modifiedData:i,routes:l}),Xe={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},Je=(n,i)=>(0,Me.Ay)(n,l=>{switch(i.type){case"ON_CHANGE":{const d=i.keys.length,f=i.keys[d-1]==="enabled";if(i.value&&f){const u=Se(i.keys,d-1).join(".");l.selectedAction=u}Pe(l,["modifiedData",...i.keys],i.value);break}case"ON_CHANGE_SELECT_ALL":{const d=["modifiedData",...i.keys],f=ae(n,d,{}),u=Object.keys(f).reduce((P,v)=>(P[v]={...f[v],enabled:i.value},P),{});Pe(l,d,u);break}case"ON_RESET":{l.modifiedData=n.initialData;break}case"ON_SUBMIT_SUCCEEDED":{l.initialData=n.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:d}=i;l.selectedAction=d===n.selectedAction?"":d;break}default:return l}}),Ce=(0,a.forwardRef)(({permissions:n,routes:i},l)=>{const{formatMessage:d}=(0,z.A)(),[f,u]=(0,a.useReducer)(Je,Xe,I=>Ze(I,n,i));(0,a.useImperativeHandle)(l,()=>({getPermissions(){return{permissions:f.modifiedData}},resetForm(){u({type:"ON_RESET"})},setFormAfterSubmit(){u({type:"ON_SUBMIT_SUCCEEDED"})}}));const T={...f,onChange:({target:{name:I,value:W}})=>u({type:"ON_CHANGE",keys:I.split("."),value:W==="empty__string_value"?"":W}),onChangeSelectAll:({target:{name:I,value:W}})=>u({type:"ON_CHANGE_SELECT_ALL",keys:I.split("."),value:W}),onSelectedAction:I=>u({type:"SELECT_ACTION",actionToSelect:I})};return(0,e.jsx)(De,{value:T,children:(0,e.jsxs)(E.x,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0",children:[(0,e.jsx)(m.E,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(R.s,{direction:"column",alignItems:"stretch",gap:6,children:[(0,e.jsxs)(R.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsx)(B.o,{variant:"delta",as:"h2",children:d({id:(0,r.g)("Plugins.header.title"),defaultMessage:"Permissions"})}),(0,e.jsx)(B.o,{as:"p",textColor:"neutral600",children:d({id:(0,r.g)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."})})]}),(0,e.jsx)(He,{})]})}),(0,e.jsx)(Ye,{})]})})});Ce.propTypes={permissions:$.object.isRequired,routes:$.object.isRequired};const ve=(0,a.memo)(Ce),Re=me.Ik().shape({name:me.Yj().required(t.iW.required),description:me.Yj().required(t.iW.required)}),qe=n=>Object.keys(n).reduce((i,l)=>{const d=n[l].controllers,f=Object.keys(d).reduce((u,P)=>(he(d[P])||(u[P]=d[P]),u),{});return he(f)||(i[l]={controllers:f}),i},{}),Le=()=>{const n=(0,t.hN)(),{get:i}=(0,t.ry)(),{formatAPIError:l}=(0,t.wq)(r.g),[{data:d,isLoading:f,error:u,refetch:P},{data:v,isLoading:y,error:T,refetch:I}]=(0,Z.useQueries)([{queryKey:["users-permissions","permissions"],async queryFn(){const{data:{permissions:K}}=await i("/users-permissions/permissions");return K}},{queryKey:["users-permissions","routes"],async queryFn(){const{data:{routes:K}}=await i("/users-permissions/routes");return K}}]),W=async()=>{await Promise.all([P(),I()])};(0,a.useEffect)(()=>{u&&n({type:"warning",message:l(u)})},[n,u,l]),(0,a.useEffect)(()=>{T&&n({type:"warning",message:l(T)})},[n,T,l]);const _=f||y;return{permissions:d?qe(d):{},routes:v??{},getData:W,isLoading:_}},es=()=>{const{formatMessage:n}=(0,z.A)(),i=(0,t.hN)(),{goBack:l}=(0,o.W6)(),{lockApp:d,unlockApp:f}=(0,t.MA)(),{isLoading:u,permissions:P,routes:v}=Le(),{trackUsage:y}=(0,t.z1)(),T=a.useRef(),{post:I}=(0,t.ry)(),W=(0,Z.useMutation)(K=>I("/users-permissions/roles",K),{onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})},onSuccess(){y("didCreateRole"),i({type:"success",message:{id:(0,r.g)("Settings.roles.created"),defaultMessage:"Role created"}}),l()}}),_=async K=>{d();const F=T.current.getPermissions();await W.mutate({...K,...F,users:[]}),f()};return(0,e.jsxs)(N.g,{children:[(0,e.jsx)(t.x7,{name:"Roles"}),(0,e.jsx)(te.l1,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:_,validationSchema:Re,children:({handleSubmit:K,values:F,handleChange:X,errors:S})=>(0,e.jsxs)(t.lV,{noValidate:!0,onSubmit:K,children:[(0,e.jsx)(w.Q,{primaryAction:!u&&(0,e.jsx)(D.$,{type:"submit",loading:W.isLoading,startIcon:(0,e.jsx)(ce.A,{}),children:n({id:"global.save",defaultMessage:"Save"})}),title:n({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:n({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),(0,e.jsx)(C.s,{children:(0,e.jsxs)(R.s,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow",children:[(0,e.jsxs)(R.s,{direction:"column",alignItems:"stretch",children:[(0,e.jsx)(B.o,{variant:"delta",as:"h2",children:n({id:(0,r.g)("EditPage.form.roles"),defaultMessage:"Role details"})}),(0,e.jsxs)(E.x,{gap:4,children:[(0,e.jsx)(m.E,{col:6,children:(0,e.jsx)(ee.k,{name:"name",value:F.name||"",onChange:X,label:n({id:"global.name",defaultMessage:"Name"}),error:S?.name?n({id:S.name,defaultMessage:"Name is required"}):!1,required:!0})}),(0,e.jsx)(m.E,{col:6,children:(0,e.jsx)(re.T,{id:"description",value:F.description||"",onChange:X,label:n({id:"global.description",defaultMessage:"Description"}),error:S?.description?n({id:S.description,defaultMessage:"Description is required"}):!1,required:!0})})]})]}),!u&&(0,e.jsx)(ve,{ref:T,permissions:P,routes:v})]})})]})})]})},ss=()=>(0,e.jsx)(t.kz,{permissions:r.P.createRole,children:(0,e.jsx)(es,{})}),ts=()=>{const{formatMessage:n}=(0,z.A)(),i=(0,t.hN)(),{lockApp:l,unlockApp:d}=(0,t.MA)(),{params:{id:f}}=(0,o.W5)("/settings/users-permissions/roles/:id"),{get:u}=(0,t.ry)(),{isLoading:P,routes:v}=Le(),{data:y,isLoading:T,refetch:I}=(0,Z.useQuery)(["users-permissions","role",f],async()=>{const{data:{role:S}}=await u(`/users-permissions/roles/${f}`);return S}),W=a.useRef(),{put:_}=(0,t.ry)(),{formatAPIError:K}=(0,t.wq)(),F=(0,Z.useMutation)(S=>_(`/users-permissions/roles/${f}`,S),{onError(S){i({type:"warning",message:K(S)})},async onSuccess(){i({type:"success",message:{id:(0,r.g)("Settings.roles.created"),defaultMessage:"Role edited"}}),await I()}}),X=async S=>{l();const Q=W.current.getPermissions();await F.mutate({...S,...Q,users:[]}),d()};return T?(0,e.jsx)(t.Bl,{}):(0,e.jsxs)(N.g,{children:[(0,e.jsx)(t.x7,{name:"Roles"}),(0,e.jsx)(te.l1,{enableReinitialize:!0,initialValues:{name:y.name,description:y.description},onSubmit:X,validationSchema:Re,children:({handleSubmit:S,values:Q,handleChange:ie,errors:J})=>(0,e.jsxs)(t.lV,{noValidate:!0,onSubmit:S,children:[(0,e.jsx)(w.Q,{primaryAction:!P&&(0,e.jsx)(D.$,{disabled:y.code==="strapi-super-admin",type:"submit",loading:F.isLoading,startIcon:(0,e.jsx)(ce.A,{}),children:n({id:"global.save",defaultMessage:"Save"})}),title:y.name,subtitle:y.description,navigationAction:(0,e.jsx)(t.N_,{startIcon:(0,e.jsx)(de.A,{}),to:"/settings/users-permissions/roles",children:n({id:"global.back",defaultMessage:"Back"})})}),(0,e.jsx)(C.s,{children:(0,e.jsxs)(R.s,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow",children:[(0,e.jsxs)(R.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsx)(B.o,{variant:"delta",as:"h2",children:n({id:(0,r.g)("EditPage.form.roles"),defaultMessage:"Role details"})}),(0,e.jsxs)(E.x,{gap:4,children:[(0,e.jsx)(m.E,{col:6,children:(0,e.jsx)(ee.k,{name:"name",value:Q.name||"",onChange:ie,label:n({id:"global.name",defaultMessage:"Name"}),error:J?.name?n({id:J.name,defaultMessage:"Name is required"}):!1,required:!0})}),(0,e.jsx)(m.E,{col:6,children:(0,e.jsx)(re.T,{id:"description",value:Q.description||"",onChange:ie,label:n({id:"global.description",defaultMessage:"Description"}),error:J?.description?n({id:J.description,defaultMessage:"Description is required"}):!1,required:!0})})]})]}),!P&&(0,e.jsx)(ve,{ref:W,permissions:y.permissions,routes:v})]})})]})})]})},ns=()=>(0,e.jsx)(t.kz,{permissions:r.P.updateRole,children:(0,e.jsx)(ts,{})}),rs=(0,ne.Ay)(U.N)`
  align-items: center;
  height: ${(0,t.a8)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:n})=>`${n.spaces[2]}}`};
  width: ${(0,t.a8)(32)};

  svg {
    height: ${(0,t.a8)(12)};
    width: ${(0,t.a8)(12)};

    path {
      fill: ${({theme:n})=>n.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:n})=>n.colors.neutral800};
      }
    }
  }
`,Ee=({sortedRoles:n,canDelete:i,permissions:l,setRoleToDelete:d,onDelete:f})=>{const{formatMessage:u}=(0,z.A)(),{push:P}=(0,o.W6)(),[v,y]=f,T=_=>i&&!["public","authenticated"].includes(_.type),I=_=>{d(_),y(!v)},W=_=>{P(`/settings/users-permissions/roles/${_}`)};return(0,e.jsx)(G.N,{children:n?.map(_=>(0,e.jsxs)(H.Tr,{...(0,t.qM)({fn:()=>W(_.id)}),children:[(0,e.jsx)(V.Td,{width:"20%",children:(0,e.jsx)(B.o,{children:_.name})}),(0,e.jsx)(V.Td,{width:"50%",children:(0,e.jsx)(B.o,{children:_.description})}),(0,e.jsx)(V.Td,{width:"30%",children:(0,e.jsx)(B.o,{children:u({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {# user} one {# user} other {# users}}"},{number:_.nb_users})})}),(0,e.jsx)(V.Td,{children:(0,e.jsxs)(R.s,{justifyContent:"end",...t.dG,children:[(0,e.jsx)(t.d4,{permissions:l.updateRole,children:(0,e.jsx)(rs,{to:`/settings/users-permissions/roles/${_.id}`,"aria-label":u({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${_.name}`}),children:(0,e.jsx)(ge.A,{})})}),T(_)&&(0,e.jsx)(t.d4,{permissions:l.deleteRole,children:(0,e.jsx)(M.K,{onClick:()=>I(_.id),noBorder:!0,icon:(0,e.jsx)(oe.A,{}),label:u({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${_.name}`})})})]})})]},_.name))})};Ee.defaultProps={canDelete:!1},Ee.propTypes={onDelete:$.array.isRequired,permissions:$.object.isRequired,setRoleToDelete:$.func.isRequired,sortedRoles:$.array.isRequired,canDelete:$.bool};const os=async(n,i)=>{try{const{get:l}=(0,t.GD)(),{data:d}=await l("/users-permissions/roles");return i("The roles have loaded successfully"),d}catch(l){throw n({type:"warning",message:{id:"notification.error"}}),new Error(l)}},as=async(n,i)=>{try{const{del:l}=(0,t.GD)();await l(`/users-permissions/roles/${n}`)}catch{i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}},is=()=>{const{trackUsage:n}=(0,t.z1)(),{formatMessage:i,locale:l}=(0,z.A)(),d=(0,t.hN)(),{notifyStatus:f}=(0,b.W)(),[{query:u}]=(0,t.sq)(),P=u?._q||"",[v,y]=(0,a.useState)(!1),[T,I]=(0,a.useState)(!1),[W,_]=(0,a.useState)();(0,t.L4)();const{isLoading:K,allowedActions:{canRead:F,canDelete:X}}=(0,t.ec)({create:r.P.createRole,read:r.P.readRoles,update:r.P.updateRole,delete:r.P.deleteRole}),{isLoading:S,data:{roles:Q},isFetching:ie,refetch:J}=(0,Z.useQuery)("get-roles",()=>os(d,f),{initialData:{},enabled:F}),{includes:Te}=(0,t.U2)(l,{sensitivity:"base"}),Be=(0,t.QM)(l,{sensitivity:"base"}),Ie=S||ie,cs=()=>{y(!v)},us={roles:{id:(0,r.g)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,r.g)("Roles.empty.search"),defaultMessage:"No roles match the search."}},gs=i({id:"global.roles",defaultMessage:"Roles"}),ps=(0,Z.useMutation)(Y=>as(Y,d),{async onSuccess(){await J()}}),hs=async()=>{I(!0),await ps.mutateAsync(W),y(!v),I(!1)},le=(Q||[]).filter(Y=>Te(Y.name,P)||Te(Y.description,P)).sort((Y,Ue)=>Be.compare(Y.name,Ue.name)||Be.compare(Y.description,Ue.description)),ms=P&&!le.length?"search":"roles",_s=4,xs=(Q?.length||0)+1;return(0,e.jsxs)(O.P,{children:[(0,e.jsx)(t.x7,{name:gs}),(0,e.jsxs)(N.g,{"aria-busy":Ie,children:[(0,e.jsx)(w.Q,{title:i({id:"global.roles",defaultMessage:"Roles"}),subtitle:i({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:(0,e.jsx)(t.d4,{permissions:r.P.createRole,children:(0,e.jsx)(t.z9,{to:"/settings/users-permissions/roles/new",onClick:()=>n("willCreateRole"),startIcon:(0,e.jsx)(pe.A,{}),size:"S",children:i({id:(0,r.g)("List.button.roles"),defaultMessage:"Add new role"})})})}),(0,e.jsx)(A.B,{startActions:(0,e.jsx)(t.q7,{label:i({id:"app.component.search.label",defaultMessage:"Search"})})}),(0,e.jsxs)(C.s,{children:[!F&&(0,e.jsx)(t.UW,{}),(Ie||K)&&(0,e.jsx)(t.Bl,{}),F&&le&&le?.length?(0,e.jsxs)(k.X,{colCount:_s,rowCount:xs,children:[(0,e.jsx)(q.d,{children:(0,e.jsxs)(H.Tr,{children:[(0,e.jsx)(V.Th,{children:(0,e.jsx)(B.o,{variant:"sigma",textColor:"neutral600",children:i({id:"global.name",defaultMessage:"Name"})})}),(0,e.jsx)(V.Th,{children:(0,e.jsx)(B.o,{variant:"sigma",textColor:"neutral600",children:i({id:"global.description",defaultMessage:"Description"})})}),(0,e.jsx)(V.Th,{children:(0,e.jsx)(B.o,{variant:"sigma",textColor:"neutral600",children:i({id:"global.users",defaultMessage:"Users"})})}),(0,e.jsx)(V.Th,{children:(0,e.jsx)(se.s,{children:i({id:"global.actions",defaultMessage:"Actions"})})})]})}),(0,e.jsx)(Ee,{sortedRoles:le,canDelete:X,permissions:r.P,setRoleToDelete:_,onDelete:[v,y]})]}):(0,e.jsx)(t.pA,{content:us[ms]})]}),(0,e.jsx)(t.TM,{isConfirmButtonLoading:T,onConfirm:hs,onToggleDialog:cs,isOpen:v})]})]})},ls=()=>(0,e.jsx)(t.kz,{permissions:r.P.accessRoles,children:(0,e.jsx)(is,{})}),ds=()=>(0,e.jsx)(t.kz,{permissions:r.P.accessRoles,children:(0,e.jsxs)(o.dO,{children:[(0,e.jsx)(o.qh,{path:"/settings/users-permissions/roles/new",component:ss,exact:!0}),(0,e.jsx)(o.qh,{path:"/settings/users-permissions/roles/:id",component:ns,exact:!0}),(0,e.jsx)(o.qh,{path:"/settings/users-permissions/roles",component:ls,exact:!0}),(0,e.jsx)(o.qh,{path:"",component:t.hH})]})})},20415:(g,h,s)=>{"use strict";s.d(h,{A:()=>o});var e=s(92132);const t=r=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...r,children:(0,e.jsx)("path",{fill:"#212134",fillRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 0 0-.374.68v1.65a.797.797 0 0 0 .384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 0 0 .216.744l1.167 1.166a.801.801 0 0 0 .744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 0 0 .679.374h1.649a.797.797 0 0 0 .686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 0 0 .744-.216l1.166-1.167a.803.803 0 0 0 .216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 0 0 .374-.679v-1.649a.796.796 0 0 0-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 0 0-.216-.744l-1.166-1.173a.802.802 0 0 0-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 0 0-.68-.374h-1.65a.797.797 0 0 0-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 0 0-.744.216L2.921 4.094a.802.802 0 0 0-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8ZM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z",clipRule:"evenodd"})}),o=t},29884:(g,h,s)=>{var e=s(97449),t=s(91522);function o(r,a){var p=-1,c=t(r)?Array(r.length):[];return e(r,function(x,j,D){c[++p]=a(x,j,D)}),c}g.exports=o},34542:(g,h,s)=>{var e=s(87864),t=s(45353),o=s(29884),r=s(82261);function a(p,c){var x=r(p)?e:o;return x(p,t(c,3))}g.exports=a},42455:(g,h,s)=>{"use strict";s.d(h,{P:()=>p});var e=s(92132),t=s(94929),o=s(94061);const r=(0,t.Ay)(o.a)`
  display: grid;
  grid-template-columns: ${({hasSideNav:c})=>c?"auto 1fr":"1fr"};
`,a=(0,t.Ay)(o.a)`
  overflow-x: hidden;
`,p=({sideNav:c,children:x})=>(0,e.jsxs)(r,{hasSideNav:Boolean(c),children:[c,(0,e.jsx)(a,{paddingBottom:10,children:x})]})},44604:(g,h,s)=>{"use strict";s.d(h,{u:()=>r});var e=s(92132),t=s(97366),o=s(94061);const r=({children:a,...p})=>{const{expanded:c,id:x}=(0,t.O)();if(!c)return null;const j=`accordion-content-${x}`,D=`accordion-label-${x}`,L=`accordion-desc-${x}`;return(0,e.jsx)(o.a,{role:"region",id:j,"aria-labelledby":D,"aria-describedby":L,...p,children:a})}},45635:(g,h,s)=>{var e=s(87212),t=s(4191),o=s(39226),r=s(3956),a=o(function(p,c){if(p==null)return[];var x=c.length;return x>1&&r(p,c[0],c[1])?c=[]:x>2&&r(c[0],c[1],c[2])&&(c=[c[0]]),t(p,e(c,1),[])});g.exports=a},46270:(g,h,s)=>{"use strict";s.d(h,{A:()=>o});var e=s(92132);const t=r=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...r,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),o=t},48126:(g,h,s)=>{var e=s(64958);function t(o,r,a){for(var p=-1,c=o.criteria,x=r.criteria,j=c.length,D=a.length;++p<j;){var L=e(c[p],x[p]);if(L){if(p>=D)return L;var E=a[p];return L*(E=="desc"?-1:1)}}return o.index-r.index}g.exports=t},57237:(g,h,s)=>{"use strict";s.d(h,{I:()=>D,n:()=>E});var e=s(92132),t=s(21272),o=s(94929),r=s(97366),a=s(84175),p=s(30893),c=s(83997),x=s(94061);const j=({theme:m,expanded:M,variant:O,disabled:A,error:C})=>C?`1px solid ${m.colors.danger600} !important`:A?`1px solid ${m.colors.neutral150}`:M?`1px solid ${m.colors.primary600}`:O==="primary"?`1px solid ${m.colors.neutral0}`:`1px solid ${m.colors.neutral100}`,D=(0,o.Ay)(p.o)``,L=(0,o.Ay)(x.a)`
  border: ${j};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:m})=>m.colors.primary600};

    ${D} {
      color: ${({theme:m,expanded:M})=>M?void 0:m.colors.primary700};
    }

    ${p.o} {
      color: ${({theme:m,expanded:M})=>M?void 0:m.colors.primary600};
    }

    & > ${c.s} {
      background: ${({theme:m})=>m.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:m})=>m.colors.primary200};
    }
  }
`,E=({children:m,disabled:M=!1,error:O,expanded:A=!1,hasErrorMessage:C=!0,id:w,onToggle:U,toggle:b,size:N="M",variant:R="primary",shadow:k})=>{const G=(0,a.B)(w),q=t.useMemo(()=>({expanded:A,onToggle:U,toggle:b,id:G,size:N,variant:R,disabled:M}),[M,A,G,U,N,b,R]);return(0,e.jsxs)(r.C.Provider,{value:q,children:[(0,e.jsx)(L,{"data-strapi-expanded":A,disabled:M,"aria-disabled":M,expanded:A,hasRadius:!0,variant:R,error:O,shadow:k,children:m}),O&&C&&(0,e.jsx)(x.a,{paddingTop:1,children:(0,e.jsx)(p.o,{variant:"pi",textColor:"danger600",children:O})})]})}},60759:(g,h,s)=>{var e=s(48143),t=s(83289),o=s(96685),r=s(87864),a=s(52689),p=s(37879),c=200;function x(j,D,L,E){var m=-1,M=t,O=!0,A=j.length,C=[],w=D.length;if(!A)return C;L&&(D=r(D,a(L))),E?(M=o,O=!1):D.length>=c&&(M=p,O=!1,D=new e(D));e:for(;++m<A;){var U=j[m],b=L==null?U:L(U);if(U=E||U!==0?U:0,O&&b===b){for(var N=w;N--;)if(D[N]===b)continue e;C.push(U)}else M(D,b,E)||C.push(U)}return C}g.exports=x},60888:(g,h,s)=>{"use strict";s.d(h,{P:()=>m});var e=s(92132),t=s(9005),o=s(94929),r=s(57237),a=s(97366);const p=({expanded:M,disabled:O,variant:A})=>{let C="neutral100";return M?C="primary100":O?C="neutral150":A==="primary"&&(C="neutral0"),C};var c=s(18629),x=s(58805),j=s(83997),D=s(30893);const L=(0,o.Ay)(c.Q)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:M,expanded:O})=>O?M.colors.primary600:M.colors.neutral500};
    }
  }
`,E=(0,o.Ay)(j.s)`
  min-height: ${({theme:M,size:O})=>M.sizes.accordions[O]};
  border-radius: ${({theme:M,expanded:O})=>O?`${M.borderRadius} ${M.borderRadius} 0 0`:M.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:M})=>M.colors.primary600};
      }
    }
  }
`,m=({title:M,description:O,as:A="span",togglePosition:C="right",action:w,...U})=>{const{onToggle:b,toggle:N,expanded:R,id:k,size:G,variant:q,disabled:H}=(0,a.O)(),V=`accordion-content-${k}`,ee=`accordion-label-${k}`,re=`accordion-desc-${k}`,B=G==="M"?6:4,se=G==="M"?B:B-2,de=p({expanded:R,disabled:H,variant:q}),ue={as:A,fontWeight:G==="S"?"bold":void 0,id:ee,textColor:R?"primary600":"neutral700",ellipsis:!0,variant:G==="M"?"delta":void 0},ge=R?"primary600":"neutral600",pe=R?"primary200":"neutral200",oe=G==="M"?`${32/16}rem`:`${24/16}rem`,te=()=>{H||(N&&!b?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),N()):b&&b())},z=(0,e.jsx)(j.s,{justifyContent:"center",borderRadius:"50%",height:oe,width:oe,transform:R?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:pe,cursor:H?"not-allowed":"pointer",onClick:te,shrink:0,children:(0,e.jsx)(x.I,{as:t.A,width:G==="M"?`${11/16}rem`:`${8/16}rem`,color:R?"primary600":"neutral600"})});return(0,e.jsx)(E,{paddingBottom:se,paddingLeft:B,paddingRight:B,paddingTop:se,background:de,expanded:R,size:G,justifyContent:"space-between",cursor:H?"not-allowed":"",children:(0,e.jsxs)(j.s,{gap:3,flex:1,maxWidth:"100%",children:[C==="left"&&z,(0,e.jsx)(L,{onClick:te,"aria-disabled":H,"aria-expanded":R,"aria-controls":V,"aria-labelledby":ee,"data-strapi-accordion-toggle":!0,expanded:R,type:"button",flex:1,minWidth:0,...U,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.I,{...ue,children:M}),O&&(0,e.jsx)(D.o,{as:"p",id:re,textColor:ge,children:O})]})}),C==="right"&&(0,e.jsxs)(j.s,{gap:3,children:[z,w]}),C==="left"&&w]})})}},61468:(g,h,s)=>{var e=s(52196);function t(o){var r=o==null?0:o.length;return r?e(o,1,r):[]}g.exports=t},64871:(g,h,s)=>{"use strict";s.d(h,{N:()=>L});var e=s(92132),t=s(21272),o=s(14595),r=s(71389),a=s(94929),p=s(78732),c=s(30893),x=s(94061);const j=a.Ay.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:E})=>E?"none":void 0};
  color: ${({disabled:E,theme:m})=>E?m.colors.neutral600:m.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${c.o} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:E})=>E.colors.primary500};
  }

  &:active {
    color: ${({theme:E})=>E.colors.primary700};
  }

  ${p.AP};
`,D=(0,a.Ay)(x.a)`
  display: flex;
`,L=t.forwardRef(({children:E,href:m,to:M,disabled:O=!1,startIcon:A,endIcon:C,...w},U)=>{const b=m?"_blank":void 0,N=m?"noreferrer noopener":void 0;return(0,e.jsxs)(j,{as:M&&!O?r.k2:"a",target:b,rel:N,to:O?void 0:M,href:O?"#":m,disabled:O,ref:U,...w,children:[A&&(0,e.jsx)(D,{as:"span","aria-hidden":!0,paddingRight:2,children:A}),(0,e.jsx)(c.o,{children:E}),C&&!m&&(0,e.jsx)(D,{as:"span","aria-hidden":!0,paddingLeft:2,children:C}),m&&(0,e.jsx)(D,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(o.A,{})})]})})},64958:(g,h,s)=>{var e=s(91662);function t(o,r){if(o!==r){var a=o!==void 0,p=o===null,c=o===o,x=e(o),j=r!==void 0,D=r===null,L=r===r,E=e(r);if(!D&&!E&&!x&&o>r||x&&j&&L&&!D&&!E||p&&j&&L||!a&&L||!c)return 1;if(!p&&!x&&!E&&o<r||E&&a&&c&&!p&&!x||D&&a&&c||!j&&c||!L)return-1}return 0}g.exports=t},73155:g=>{function h(s){return s!==s}g.exports=h},74565:g=>{function h(s,e){var t=s.length;for(s.sort(e);t--;)s[t]=s[t].value;return s}g.exports=h},74773:(g,h,s)=>{"use strict";s.d(h,{B:()=>o});var e=s(92132),t=s(83997);const o=({startActions:r,endActions:a})=>!r&&!a?null:(0,e.jsxs)(t.s,{justifyContent:"space-between",alignItems:"flex-start",paddingBottom:4,paddingLeft:10,paddingRight:10,children:[(0,e.jsx)(t.s,{gap:2,wrap:"wrap",children:r}),(0,e.jsx)(t.s,{gap:2,shrink:0,wrap:"wrap",children:a})]})},75821:(g,h,s)=>{var e=s(91522);function t(o,r){return function(a,p){if(a==null)return a;if(!e(a))return o(a,p);for(var c=a.length,x=r?c:-1,j=Object(a);(r?x--:++x<c)&&p(j[x],x,j)!==!1;);return a}}g.exports=t},77771:g=>{function h(s,e,t){for(var o=t-1,r=s.length;++o<r;)if(s[o]===e)return o;return-1}g.exports=h},80151:(g,h,s)=>{var e=s(97079),t=s(73155),o=s(77771);function r(a,p,c){return p===p?o(a,p,c):e(a,t,c)}g.exports=r},83289:(g,h,s)=>{var e=s(80151);function t(o,r){var a=o==null?0:o.length;return!!a&&e(o,r,0)>-1}g.exports=t},96685:g=>{function h(s,e,t){for(var o=-1,r=s==null?0:s.length;++o<r;)if(t(e,s[o]))return!0;return!1}g.exports=h},97079:g=>{function h(s,e,t,o){for(var r=s.length,a=t+(o?1:-1);o?a--:++a<r;)if(e(s[a],a,s))return a;return-1}g.exports=h},97366:(g,h,s)=>{"use strict";s.d(h,{C:()=>t,O:()=>o});var e=s(21272);const t=(0,e.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),o=()=>(0,e.useContext)(t)},97449:(g,h,s)=>{var e=s(85373),t=s(75821),o=t(e);g.exports=o}}]);
