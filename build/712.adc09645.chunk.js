(self.webpackChunknassif_group_strapi=self.webpackChunknassif_group_strapi||[]).push([[712],{20920:(_,A,s)=>{var e=s(87864),l=s(80151),i=s(29327),u=s(52689),f=s(76299),h=Array.prototype,M=h.splice;function v(P,y,L,F){var x=F?i:l,r=-1,p=y.length,g=P;for(P===y&&(y=f(y)),L&&(g=e(P,u(L)));++r<p;)for(var T=0,I=y[r],$=L?L(I):I;(T=x(g,$,T,F))>-1;)g!==P&&M.call(g,T,1),M.call(P,T,1);return P}_.exports=v},29327:_=>{function A(s,e,l,i){for(var u=l-1,f=s.length;++u<f;)if(i(s[u],e))return u;return-1}_.exports=A},34542:(_,A,s)=>{var e=s(87864),l=s(45353),i=s(29884),u=s(82261);function f(h,M){var v=u(h)?e:i;return v(h,l(M,3))}_.exports=f},44604:(_,A,s)=>{"use strict";s.d(A,{u:()=>u});var e=s(92132),l=s(97366),i=s(94061);const u=({children:f,...h})=>{const{expanded:M,id:v}=(0,l.O)();if(!M)return null;const P=`accordion-content-${v}`,y=`accordion-label-${v}`,L=`accordion-desc-${v}`;return(0,e.jsx)(i.a,{role:"region",id:P,"aria-labelledby":y,"aria-describedby":L,...h,children:f})}},57237:(_,A,s)=>{"use strict";s.d(A,{I:()=>y,n:()=>F});var e=s(92132),l=s(21272),i=s(94929),u=s(97366),f=s(84175),h=s(30893),M=s(83997),v=s(94061);const P=({theme:x,expanded:r,variant:p,disabled:g,error:T})=>T?`1px solid ${x.colors.danger600} !important`:g?`1px solid ${x.colors.neutral150}`:r?`1px solid ${x.colors.primary600}`:p==="primary"?`1px solid ${x.colors.neutral0}`:`1px solid ${x.colors.neutral100}`,y=(0,i.Ay)(h.o)``,L=(0,i.Ay)(v.a)`
  border: ${P};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:x})=>x.colors.primary600};

    ${y} {
      color: ${({theme:x,expanded:r})=>r?void 0:x.colors.primary700};
    }

    ${h.o} {
      color: ${({theme:x,expanded:r})=>r?void 0:x.colors.primary600};
    }

    & > ${M.s} {
      background: ${({theme:x})=>x.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:x})=>x.colors.primary200};
    }
  }
`,F=({children:x,disabled:r=!1,error:p,expanded:g=!1,hasErrorMessage:T=!0,id:I,onToggle:$,toggle:H,size:G="M",variant:D="primary",shadow:V})=>{const b=(0,f.B)(I),z=l.useMemo(()=>({expanded:g,onToggle:$,toggle:H,id:b,size:G,variant:D,disabled:r}),[r,g,b,$,G,H,D]);return(0,e.jsxs)(u.C.Provider,{value:z,children:[(0,e.jsx)(L,{"data-strapi-expanded":g,disabled:r,"aria-disabled":r,expanded:g,hasRadius:!0,variant:D,error:p,shadow:V,children:x}),p&&T&&(0,e.jsx)(v.a,{paddingTop:1,children:(0,e.jsx)(h.o,{variant:"pi",textColor:"danger600",children:p})})]})}},60888:(_,A,s)=>{"use strict";s.d(A,{P:()=>x});var e=s(92132),l=s(9005),i=s(94929),u=s(57237),f=s(97366);const h=({expanded:r,disabled:p,variant:g})=>{let T="neutral100";return r?T="primary100":p?T="neutral150":g==="primary"&&(T="neutral0"),T};var M=s(18629),v=s(58805),P=s(83997),y=s(30893);const L=(0,i.Ay)(M.Q)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:r,expanded:p})=>p?r.colors.primary600:r.colors.neutral500};
    }
  }
`,F=(0,i.Ay)(P.s)`
  min-height: ${({theme:r,size:p})=>r.sizes.accordions[p]};
  border-radius: ${({theme:r,expanded:p})=>p?`${r.borderRadius} ${r.borderRadius} 0 0`:r.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:r})=>r.colors.primary600};
      }
    }
  }
`,x=({title:r,description:p,as:g="span",togglePosition:T="right",action:I,...$})=>{const{onToggle:H,toggle:G,expanded:D,id:V,size:b,variant:z,disabled:S}=(0,f.O)(),o=`accordion-content-${V}`,se=`accordion-label-${V}`,re=`accordion-desc-${V}`,Q=b==="M"?6:4,te=b==="M"?Q:Q-2,w=h({expanded:D,disabled:S,variant:z}),le={as:g,fontWeight:b==="S"?"bold":void 0,id:se,textColor:D?"primary600":"neutral700",ellipsis:!0,variant:b==="M"?"delta":void 0},ne=D?"primary600":"neutral600",de=D?"primary200":"neutral200",oe=b==="M"?`${32/16}rem`:`${24/16}rem`,ae=()=>{S||(G&&!H?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),G()):H&&H())},X=(0,e.jsx)(P.s,{justifyContent:"center",borderRadius:"50%",height:oe,width:oe,transform:D?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:de,cursor:S?"not-allowed":"pointer",onClick:ae,shrink:0,children:(0,e.jsx)(v.I,{as:l.A,width:b==="M"?`${11/16}rem`:`${8/16}rem`,color:D?"primary600":"neutral600"})});return(0,e.jsx)(F,{paddingBottom:te,paddingLeft:Q,paddingRight:Q,paddingTop:te,background:w,expanded:D,size:b,justifyContent:"space-between",cursor:S?"not-allowed":"",children:(0,e.jsxs)(P.s,{gap:3,flex:1,maxWidth:"100%",children:[T==="left"&&X,(0,e.jsx)(L,{onClick:ae,"aria-disabled":S,"aria-expanded":D,"aria-controls":o,"aria-labelledby":se,"data-strapi-accordion-toggle":!0,expanded:D,type:"button",flex:1,minWidth:0,...$,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.I,{...le,children:r}),p&&(0,e.jsx)(y.o,{as:"p",id:re,textColor:ne,children:p})]})}),T==="right"&&(0,e.jsxs)(P.s,{gap:3,children:[X,I]}),T==="left"&&I]})})}},61468:(_,A,s)=>{var e=s(52196);function l(i){var u=i==null?0:i.length;return u?e(i,1,u):[]}_.exports=l},70712:(_,A,s)=>{"use strict";s.d(A,{A:()=>Be});var e=s(92132),l=s(21272),i=s(57237),u=s(44604),f=s(60888),h=s(94061),M=s(85963),v=s(4181),P=s(90151),y=s(68074),L=s(4198),F=s(55356),x=s(38413),r=s(83997),p=s(30893),g=s(56445),T=s(61535),I=s(54894),$=s(74930),H=s(82437),G=s(17703),D=s(89032),V=s(97927),b=s(89565),z=s(58593),S=s(28746),o=s(33544),se=s(54514),re=s(20415),Q=s(34542),te=s(61468),w=s(94929),fe=s(24092),le=s(88761),ne=s(92173);const[de,oe]=(0,D.q)("ApiTokenPermissionsContext"),ae=({children:t,...a})=>(0,e.jsx)(de,{...a,children:t}),X=()=>oe("useApiTokenPermissions"),ye=t=>{const a={allActionsIds:[],permissions:[]};return a.permissions=Object.keys(t).map(n=>({apiId:n,label:n.split("::")[1],controllers:Object.keys(t[n].controllers).map(m=>({controller:m,actions:t[n].controllers[m].map(d=>{const C=`${n}.${m}.${d}`;return n.includes("api::")&&a.allActionsIds.push(C),{action:d,actionId:C}}).flat()})).flat()})),a},ce=({errors:t,onChange:a,canEditInputs:n,isCreating:m,values:d,apiToken:C,onDispatch:E,setHasChangedPermissions:N})=>{const{formatMessage:U}=(0,I.A)(),W=({target:{value:K}})=>{N(!1),K==="full-access"&&E({type:"SELECT_ALL_ACTIONS"}),K==="read-only"&&E({type:"ON_CHANGE_READ_ONLY"})},J=[{value:"read-only",label:{id:"Settings.tokens.types.read-only",defaultMessage:"Read-only"}},{value:"full-access",label:{id:"Settings.tokens.types.full-access",defaultMessage:"Full access"}},{value:"custom",label:{id:"Settings.tokens.types.custom",defaultMessage:"Custom"}}];return(0,e.jsx)(h.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(r.s,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsx)(p.o,{variant:"delta",as:"h2",children:U({id:"global.details",defaultMessage:"Details"})}),(0,e.jsxs)(P.x,{gap:5,children:[(0,e.jsx)(y.E,{col:6,xs:12,children:(0,e.jsx)(S.T,{errors:t,values:d,canEditInputs:n,onChange:a})},"name"),(0,e.jsx)(y.E,{col:6,xs:12,children:(0,e.jsx)(S.a,{errors:t,values:d,canEditInputs:n,onChange:a})},"description"),(0,e.jsx)(y.E,{col:6,xs:12,children:(0,e.jsx)(S.L,{isCreating:m,errors:t,values:d,onChange:a,token:C})},"lifespan"),(0,e.jsx)(y.E,{col:6,xs:12,children:(0,e.jsx)(S.b,{values:d,errors:t,label:{id:"Settings.tokens.form.type",defaultMessage:"Token type"},onChange:K=>{W({target:{value:K}}),a({target:{name:"type",value:K}})},options:J,canEditInputs:n})},"type")]})]})})};ce.propTypes={errors:o.shape({name:o.string,description:o.string,lifespan:o.string,type:o.string}),onChange:o.func.isRequired,canEditInputs:o.bool.isRequired,values:o.shape({name:o.string,description:o.string,lifespan:o.oneOfType([o.number,o.string]),type:o.string}).isRequired,isCreating:o.bool.isRequired,apiToken:o.shape({id:o.oneOfType([o.number,o.string]),type:o.string,lifespan:o.string,name:o.string,accessKey:o.string,permissions:o.array,description:o.string,createdAt:o.string}),onDispatch:o.func.isRequired,setHasChangedPermissions:o.func.isRequired},ce.defaultProps={errors:{},apiToken:{}};const pe=({apiTokenName:t})=>{const{formatMessage:a}=(0,I.A)();return(0,g.L4)(),(0,e.jsxs)(x.g,{"aria-busy":"true",children:[(0,e.jsx)(g.x7,{name:"API Tokens"}),(0,e.jsx)(F.Q,{primaryAction:(0,e.jsx)(M.$,{disabled:!0,startIcon:(0,e.jsx)(se.A,{}),type:"button",size:"L",children:a({id:"global.save",defaultMessage:"Save"})}),title:t||a({id:"Settings.apiTokens.createPage.title",defaultMessage:"Create API Token"})}),(0,e.jsx)(L.s,{children:(0,e.jsx)(g.Bl,{})})]})};pe.defaultProps={apiTokenName:null},pe.propTypes={apiTokenName:o.string};const Te=t=>{switch(t){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Ce=(0,w.Ay)(h.a)`
  margin: -1px;
  border-radius: ${({theme:t})=>t.spaces[1]} 0 0 ${({theme:t})=>t.spaces[1]};
`;function ue({route:t}){const{formatMessage:a}=(0,I.A)(),{method:n,handler:m,path:d}=t,C=d?te(d.split("/")):[],[E="",N=""]=m?m.split("."):[],U=Te(t.method);return(0,e.jsxs)(r.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsxs)(p.o,{variant:"delta",as:"h3",children:[a({id:"Settings.apiTokens.createPage.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",(0,e.jsx)("span",{children:E}),(0,e.jsxs)(p.o,{variant:"delta",textColor:"primary600",children:[".",N]})]}),(0,e.jsxs)(r.s,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0,children:[(0,e.jsx)(Ce,{background:U.background,borderColor:U.border,padding:2,children:(0,e.jsx)(p.o,{fontWeight:"bold",textColor:U.text,children:n})}),(0,e.jsx)(h.a,{paddingLeft:2,paddingRight:2,children:Q(C,W=>(0,e.jsxs)(p.o,{textColor:W.includes(":")?"neutral600":"neutral900",children:["/",W]},W))})]})]})}ue.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},ue.propTypes={route:o.shape({handler:o.string,method:o.string,path:o.string})};const Oe=()=>{const{value:{selectedAction:t,routes:a}}=X(),{formatMessage:n}=(0,I.A)(),m=t?.split(".")[0];return(0,e.jsx)(y.E,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"},children:t?(0,e.jsx)(r.s,{direction:"column",alignItems:"stretch",gap:2,children:a[m]?.map(d=>d.config.auth?.scope?.includes(t)||d.handler===t?(0,e.jsx)(ue,{route:d},d.handler):null)}):(0,e.jsxs)(r.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsx)(p.o,{variant:"delta",as:"h3",children:n({id:"Settings.apiTokens.createPage.permissions.header.title",defaultMessage:"Advanced settings"})}),(0,e.jsx)(p.o,{as:"p",textColor:"neutral600",children:n({id:"Settings.apiTokens.createPage.permissions.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"})})]})})},Pe=(0,w.AH)`
  background: ${t=>t.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Me=(0,w.Ay)(h.a)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${t=>t.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${t=>t.isActive&&Pe}
  &:hover {
    ${Pe}
  }
`,ve=w.Ay.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:t})=>t.colors.neutral150};
`,ge=({controllers:t,label:a,orderNumber:n,disabled:m,onExpanded:d,indexExpandendCollapsedContent:C})=>{const{value:{onChangeSelectAll:E,onChange:N,selectedActions:U,setSelectedAction:W,selectedAction:J}}=X(),[K,ie]=(0,l.useState)(!1),{formatMessage:he}=(0,I.A)(),Z=()=>{ie(O=>!O),d(n)};(0,l.useEffect)(()=>{C!==null&&C!==n&&K&&ie(!1)},[C,n,K]);const R=O=>O===J;return(0,e.jsxs)(i.n,{expanded:K,onToggle:Z,variant:n%2?"primary":"secondary",children:[(0,e.jsx)(f.P,{title:fe(a)}),(0,e.jsx)(u.u,{children:t?.map(O=>{const q=O.actions.every(B=>U.includes(B.actionId)),_e=O.actions.some(B=>U.includes(B.actionId));return(0,e.jsxs)(h.a,{children:[(0,e.jsxs)(r.s,{justifyContent:"space-between",alignItems:"center",padding:4,children:[(0,e.jsx)(h.a,{paddingRight:4,children:(0,e.jsx)(p.o,{variant:"sigma",textColor:"neutral600",children:O?.controller})}),(0,e.jsx)(ve,{}),(0,e.jsx)(h.a,{paddingLeft:4,children:(0,e.jsx)(v.S,{value:q,indeterminate:!q&&_e,onValueChange:()=>{E({target:{value:[...O.actions]}})},disabled:m,children:he({id:"app.utils.select-all",defaultMessage:"Select all"})})})]}),(0,e.jsx)(P.x,{gap:4,padding:4,children:O?.actions&&O?.actions.map(B=>(0,e.jsx)(y.E,{col:6,children:(0,e.jsxs)(Me,{isActive:R(B.actionId),padding:2,hasRadius:!0,children:[(0,e.jsx)(v.S,{value:U.includes(B.actionId),name:B.actionId,onValueChange:()=>{N({target:{value:B.actionId}})},disabled:m,children:B.action}),(0,e.jsx)("button",{type:"button","data-testid":"action-cog",onClick:()=>W({target:{value:B.actionId}}),style:{display:"inline-flex",alignItems:"center"},children:(0,e.jsx)(re.A,{})})]})},B.actionId))})]},`${a}.${O?.controller}`)})})]})};ge.defaultProps={controllers:[],orderNumber:0,disabled:!1,onExpanded:()=>null,indexExpandendCollapsedContent:null},ge.propTypes={controllers:o.array,orderNumber:o.number,label:o.string.isRequired,disabled:o.bool,onExpanded:o.func,indexExpandendCollapsedContent:o.number};const Ee=({section:t,...a})=>{const[n,m]=(0,l.useState)(null),d=C=>m(C);return(0,e.jsx)(h.a,{padding:4,background:"neutral0",children:t&&t.map((C,E)=>(0,e.jsx)(ge,{label:C.label,controllers:C.controllers,orderNumber:E,indexExpandendCollapsedContent:n,onExpanded:d,name:C.apiId,...a},C.apiId))})};Ee.defaultProps={section:null},Ee.propTypes={section:o.arrayOf(o.object)};const Ie=({...t})=>{const{value:{data:a}}=X(),{formatMessage:n}=(0,I.A)();return(0,e.jsxs)(P.x,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0",children:[(0,e.jsxs)(y.E,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:[(0,e.jsxs)(r.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsx)(p.o,{variant:"delta",as:"h2",children:n({id:"Settings.apiTokens.createPage.permissions.title",defaultMessage:"Permissions"})}),(0,e.jsx)(p.o,{as:"p",textColor:"neutral600",children:n({id:"Settings.apiTokens.createPage.permissions.description",defaultMessage:"Only actions bound by a route are listed below."})})]}),a?.permissions&&(0,e.jsx)(Ee,{section:a?.permissions,...t})]}),(0,e.jsx)(Oe,{})]})},De=(0,l.memo)(Ie),je=(t,a=[])=>({...t,selectedAction:null,routes:[],selectedActions:[],data:ye(a)}),Re={data:{},selectedActions:[]},Le=(t,a)=>(0,le.Ay)(t,n=>{switch(a.type){case"ON_CHANGE":{n.selectedActions.includes(a.value)?ne(n.selectedActions,a.value):n.selectedActions.push(a.value);break}case"SELECT_ALL_IN_PERMISSION":{a.value.every(d=>n.selectedActions.includes(d.actionId))?a.value.forEach(d=>{ne(n.selectedActions,d.actionId)}):a.value.forEach(d=>{n.selectedActions.push(d.actionId)});break}case"SELECT_ALL_ACTIONS":{n.selectedActions=[...n.data.allActionsIds];break}case"ON_CHANGE_READ_ONLY":{const m=n.data.allActionsIds.filter(d=>d.includes("find")||d.includes("findOne"));n.selectedActions=[...m];break}case"UPDATE_PERMISSIONS_LAYOUT":{n.data=ye(a.value);break}case"UPDATE_ROUTES":{n.routes={...a.value};break}case"UPDATE_PERMISSIONS":{n.selectedActions=[...a.value];break}case"SET_SELECTED_ACTION":{n.selectedAction=a.value;break}default:return n}}),Se="Name already taken",Be=()=>{(0,g.L4)();const{formatMessage:t}=(0,I.A)(),{lockApp:a,unlockApp:n}=(0,g.MA)(),m=(0,g.hN)(),d=(0,G.W6)(),C=(0,H.d4)(V.s),[E,N]=(0,l.useState)(d.location.state?.apiToken.accessKey?{...d.location.state.apiToken}:null),{trackUsage:U}=(0,g.z1)(),W=(0,l.useRef)(U),{setCurrentStep:J}=(0,g.Cx)(),{allowedActions:{canCreate:K,canUpdate:ie,canRegenerate:he}}=(0,g.ec)(C.settings["api-tokens"]),[Z,R]=(0,l.useReducer)(Le,Re,c=>je(c,{})),{params:{id:O}}=(0,G.W5)("/settings/api-tokens/:id"),{get:q,post:_e,put:B}=(0,g.ry)(),k=O==="create";(0,$.useQuery)("content-api-permissions",async()=>{const[c,Y]=await Promise.all(["/admin/content-api/permissions","/admin/content-api/routes"].map(async ee=>{const{data:j}=await q(ee);return j.data}));R({type:"UPDATE_PERMISSIONS_LAYOUT",value:c}),R({type:"UPDATE_ROUTES",value:Y}),E&&(E?.type==="read-only"&&R({type:"ON_CHANGE_READ_ONLY"}),E?.type==="full-access"&&R({type:"SELECT_ALL_ACTIONS"}),E?.type==="custom"&&R({type:"UPDATE_PERMISSIONS",value:E?.permissions}))},{onError(){m({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),(0,l.useEffect)(()=>{W.current(k?"didAddTokenFromList":"didEditTokenFromList",{tokenType:z.A})},[k]);const{status:be}=(0,$.useQuery)(["api-token",O],async()=>{const{data:{data:c}}=await q(`/admin/api-tokens/${O}`);return N({...c}),c?.type==="read-only"&&R({type:"ON_CHANGE_READ_ONLY"}),c?.type==="full-access"&&R({type:"SELECT_ALL_ACTIONS"}),c?.type==="custom"&&R({type:"UPDATE_PERMISSIONS",value:c?.permissions}),c},{enabled:!k&&!E,onError(){m({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),ke=async(c,Y)=>{W.current(k?"willCreateToken":"willEditToken",{tokenType:z.A}),a();const ee=c.lifespan&&parseInt(c.lifespan,10)&&c.lifespan!=="0"?parseInt(c.lifespan,10):null;try{const{data:{data:j}}=k?await _e("/admin/api-tokens",{...c,lifespan:ee,permissions:c.type==="custom"?Z.selectedActions:null}):await B(`/admin/api-tokens/${O}`,{name:c.name,description:c.description,type:c.type,permissions:c.type==="custom"?Z.selectedActions:null});k&&(d.replace(`/settings/api-tokens/${j.id}`,{apiToken:j}),J("apiTokens.success")),n(),N({...j}),m({type:"success",message:t(k?{id:"notification.success.apitokencreated",defaultMessage:"API Token successfully created"}:{id:"notification.success.apitokenedited",defaultMessage:"API Token successfully edited"})}),W.current(k?"didCreateToken":"didEditToken",{type:E.type,tokenType:z.A})}catch(j){const Ae=(0,b.f)(j.response.data);Y.setErrors(Ae),j?.response?.data?.error?.message===Se?m({type:"warning",message:j.response.data.message||"notification.error.tokennamenotunique"}):m({type:"warning",message:j?.response?.data?.message||"notification.error"}),n()}},[Ue,xe]=(0,l.useState)(!1),We={...Z,onChange:({target:{value:c}})=>{xe(!0),R({type:"ON_CHANGE",value:c})},onChangeSelectAll:({target:{value:c}})=>{xe(!0),R({type:"SELECT_ALL_IN_PERMISSION",value:c})},setSelectedAction:({target:{value:c}})=>{R({type:"SET_SELECTED_ACTION",value:c})}},me=ie&&!k||K&&k;return!k&&!E&&be!=="success"?(0,e.jsx)(pe,{apiTokenName:E?.name}):(0,e.jsx)(ae,{value:We,children:(0,e.jsxs)(x.g,{children:[(0,e.jsx)(g.x7,{name:"API Tokens"}),(0,e.jsx)(T.l1,{validationSchema:S.s,validateOnChange:!1,initialValues:{name:E?.name||"",description:E?.description||"",type:E?.type,lifespan:E?.lifespan?E.lifespan.toString():E?.lifespan},enableReinitialize:!0,onSubmit:(c,Y)=>ke(c,Y),children:({errors:c,handleChange:Y,isSubmitting:ee,values:j,setFieldValue:Ae})=>(Ue&&j?.type!=="custom"&&Ae("type","custom"),(0,e.jsxs)(g.lV,{children:[(0,e.jsx)(S.F,{backUrl:"/settings/api-tokens",title:{id:"Settings.apiTokens.createPage.title",defaultMessage:"Create API Token"},token:E,setToken:N,canEditInputs:me,canRegenerate:he,isSubmitting:ee,regenerateUrl:"/admin/api-tokens/"}),(0,e.jsx)(L.s,{children:(0,e.jsxs)(r.s,{direction:"column",alignItems:"stretch",gap:6,children:[Boolean(E?.name)&&(0,e.jsx)(S.c,{token:E?.accessKey,tokenType:z.A}),(0,e.jsx)(ce,{errors:c,onChange:Y,canEditInputs:me,isCreating:k,values:j,apiToken:E,onDispatch:R,setHasChangedPermissions:xe}),(0,e.jsx)(De,{disabled:!me||j?.type==="read-only"||j?.type==="full-access"})]})})]}))})]})})}},73155:_=>{function A(s){return s!==s}_.exports=A},76610:(_,A,s)=>{var e=s(20920);function l(i,u){return i&&i.length&&u&&u.length?e(i,u):i}_.exports=l},77771:_=>{function A(s,e,l){for(var i=l-1,u=s.length;++i<u;)if(s[i]===e)return i;return-1}_.exports=A},80151:(_,A,s)=>{var e=s(97079),l=s(73155),i=s(77771);function u(f,h,M){return h===h?i(f,h,M):e(f,l,M)}_.exports=u},92173:(_,A,s)=>{var e=s(39226),l=s(76610),i=e(l);_.exports=i},97079:_=>{function A(s,e,l,i){for(var u=s.length,f=l+(i?1:-1);i?f--:++f<u;)if(e(s[f],f,s))return f;return-1}_.exports=A},97366:(_,A,s)=>{"use strict";s.d(A,{C:()=>l,O:()=>i});var e=s(21272);const l=(0,e.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),i=()=>(0,e.useContext)(l)}}]);
