"use strict";(self.webpackChunknassif_group_strapi=self.webpackChunknassif_group_strapi||[]).push([[6084],{23302:(u,E,t)=>{t.d(E,{u:()=>M});var s=t(21272),e=t(56445),_=t(60256),D=t(74930);function M(){const{get:c}=(0,e.ry)(),{formatAPIError:d}=(0,e.wq)(),l=(0,e.hN)(),O=(0,D.useQueries)([{queryKey:["content-manager","components"],async queryFn(){const{data:{data:a}}=await c("/content-manager/components");return a},onError(a){a instanceof _.pe&&l({type:"warning",message:d(a)})}},{queryKey:["content-manager","content-types"],async queryFn(){const{data:{data:a}}=await c("/content-manager/content-types");return a},onError(a){a instanceof _.pe&&l({type:"warning",message:d(a)})}}]),[n,g]=O,P=n.isLoading||g.isLoading,o=s.useMemo(()=>(g?.data??[]).filter(a=>a.kind==="collectionType"&&a.isDisplayed),[g?.data]),m=s.useMemo(()=>(g?.data??[]).filter(a=>a.kind!=="collectionType"&&a.isDisplayed),[g?.data]);return{isLoading:P,components:s.useMemo(()=>n?.data??[],[n?.data]),collectionTypes:o,singleTypes:m}}},25844:(u,E,t)=>{t.d(E,{u:()=>D});var s=t(21272),e=t(56445),_=t(74930);function D(M={}){const{get:c}=(0,e.ry)(),{id:d="",...l}=M,O={populate:"stages"},{data:n,isLoading:g,status:P,refetch:o}=(0,_.useQuery)(["review-workflows","workflows",d],async()=>(await c(`/admin/review-workflows/workflows/${d}`,{params:{...O,...l}})).data),m=s.useMemo(()=>d&&n?.data?[n.data]:Array.isArray(n?.data)?n.data:[],[n?.data,d]);return{meta:s.useMemo(()=>n?.meta??{},[n?.meta]),workflows:m,isLoading:g,status:P,refetch:o}}},36084:(u,E,t)=>{t.r(E),t.d(E,{default:()=>Y});var s=t(92132),e=t(56445),_=t(82437),D=t(97927),M=t(21272),c=t(88353),d=t(43064),l=t(83997),O=t(35513),n=t(25641),g=t(26127),P=t(90361),o=t(33363),m=t(40216),a=t(30893),L=t(98765),T=t(41909),A=t(5194),W=t(50612),B=t(54894),p=t(74930),w=t(17703),f=t(94929),v=t(23302),j=t(89031),I=t(76523),K=t(63072),h=t(80909),G=t(25844),gt=t(55151),Dt=t(79077),Mt=t(59057),Ot=t(15126),ft=t(63299),Pt=t(67014),mt=t(59080),ut=t(79275),vt=t(14718),Ct=t(61535),ht=t(5790),Tt=t(12083),yt=t(41286),Lt=t(35223),At=t(5409),It=t(2600),xt=t(48940),Rt=t(51187),Wt=t(75866);const J=(0,f.Ay)(e.N_)`
  align-items: center;
  height: ${(0,e.a8)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:i})=>`${i.spaces[2]}}`};
  width: ${(0,e.a8)(32)};

  svg {
    height: ${(0,e.a8)(12)};
    width: ${(0,e.a8)(12)};

    path {
      fill: ${({theme:i})=>i.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:i})=>i.colors.neutral800};
      }
    }
  }
`;function X(){const{formatMessage:i}=(0,B.A)(),{push:N}=(0,w.W6)(),{collectionTypes:Z,singleTypes:b,isLoading:q}=(0,v.u)(),{meta:y,workflows:F,isLoading:U,refetch:tt}=(0,G.u)(),[H,S]=M.useState(null),[st,x]=M.useState(!1),{del:et}=(0,e.ry)(),{formatAPIError:nt}=(0,e.wq)(),k=(0,e.hN)(),{getFeature:at,isLoading:z}=(0,j.u)(),{trackUsage:Q}=(0,e.z1)(),ot=(0,_.d4)(D.s),{allowedActions:{canCreate:V,canDelete:it}}=(0,e.ec)(ot.settings["review-workflows"]),C=at("review-workflows"),{mutateAsync:rt,isLoading:_t}=(0,p.useMutation)(async({workflowId:r,stages:R})=>{const{data:{data:$}}=await et(`/admin/review-workflows/workflows/${r}`,{data:R});return $},{onSuccess(){k({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),lt=r=>[...Z,...b].find($=>$.uid===r).info.displayName,dt=r=>{S(r)},Et=()=>{S(null)},ct=async()=>{try{const r=await rt({workflowId:H});return await tt(),S(null),r}catch(r){return k({type:"warning",message:nt(r)}),null}};return M.useEffect(()=>{!U&&!z&&C?.[h.C]&&y?.workflowCount>parseInt(C[h.C],10)&&x(!0)},[z,U,C,y?.workflowCount,y.workflowsTotal]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.H,{primaryAction:V&&(0,s.jsx)(e.z9,{startIcon:(0,s.jsx)(A.A,{}),size:"S",to:"/settings/review-workflows/create",onClick:r=>{C?.[h.C]&&y?.workflowCount>=parseInt(C[h.C],10)?(r.preventDefault(),x(!0)):Q("willCreateWorkflow")},children:i({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})}),subtitle:i({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:i({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),(0,s.jsxs)(I.R,{children:[U||q?(0,s.jsx)(l.s,{justifyContent:"center",children:(0,s.jsx)(d.a,{children:i({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"})})}):(0,s.jsxs)(O.X,{colCount:3,footer:V&&(0,s.jsx)(m.S,{icon:(0,s.jsx)(A.A,{}),onClick:()=>{C?.[h.C]&&y?.workflowCount>=parseInt(C[h.C],10)?x(!0):(N("/settings/review-workflows/create"),Q("willCreateWorkflow"))},children:i({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})}),rowCount:1,children:[(0,s.jsx)(g.d,{children:(0,s.jsxs)(P.Tr,{children:[(0,s.jsx)(o.Th,{children:(0,s.jsx)(a.o,{variant:"sigma",children:i({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"})})}),(0,s.jsx)(o.Th,{children:(0,s.jsx)(a.o,{variant:"sigma",children:i({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"})})}),(0,s.jsx)(o.Th,{children:(0,s.jsx)(a.o,{variant:"sigma",children:i({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"})})}),(0,s.jsx)(o.Th,{children:(0,s.jsx)(L.s,{children:i({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"})})})]})}),(0,s.jsx)(n.N,{children:F.map(r=>(0,M.createElement)(P.Tr,{...(0,e.qM)({fn(R){R.target.nodeName!=="BUTTON"&&N(`/settings/review-workflows/${r.id}`)}}),key:`workflow-${r.id}`},(0,s.jsx)(o.Td,{width:(0,e.a8)(250),children:(0,s.jsx)(a.o,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:r.name})}),(0,s.jsx)(o.Td,{children:(0,s.jsx)(a.o,{textColor:"neutral800",children:r.stages.length})}),(0,s.jsx)(o.Td,{children:(0,s.jsx)(a.o,{textColor:"neutral800",children:(r?.contentTypes??[]).map(lt).join(", ")})}),(0,s.jsx)(o.Td,{children:(0,s.jsxs)(l.s,{alignItems:"center",justifyContent:"end",children:[(0,s.jsx)(J,{to:`/settings/review-workflows/${r.id}`,"aria-label":i({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:r.name}),children:(0,s.jsx)(T.A,{})}),F.length>1&&it&&(0,s.jsx)(c.K,{"aria-label":i({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:(0,s.jsx)(W.A,{}),noBorder:!0,onClick:()=>{dt(r.id)}})]})})))})]}),(0,s.jsx)(e.TM,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:_t,isOpen:!!H,onToggleDialog:Et,onConfirm:ct}),(0,s.jsxs)(K.L,{isOpen:st,onClose:()=>x(!1),children:[(0,s.jsx)(K.T,{children:i({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})}),(0,s.jsx)(K.B,{children:i({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})})]})]})]})}function Y(){const i=(0,_.d4)(D.s);return(0,s.jsx)(e.kz,{permissions:i.settings["review-workflows"].main,children:(0,s.jsx)(X,{})})}},40216:(u,E,t)=>{t.d(E,{S:()=>O});var s=t(92132),e=t(94929),_=t(94061),D=t(48653),M=t(83997),c=t(30893);const d=(0,e.Ay)(_.a)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:n})=>n.colors.primary600};
  }
`,l=(0,e.Ay)(_.a)`
  border-radius: 0 0 ${({theme:n})=>n.borderRadius} ${({theme:n})=>n.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,O=({children:n,icon:g,...P})=>(0,s.jsxs)("div",{children:[(0,s.jsx)(D.c,{}),(0,s.jsx)(l,{as:"button",background:"primary100",padding:5,...P,children:(0,s.jsxs)(M.s,{children:[(0,s.jsx)(d,{"aria-hidden":!0,background:"primary200",children:g}),(0,s.jsx)(_.a,{paddingLeft:3,children:(0,s.jsx)(c.o,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:n})})]})})]})},46270:(u,E,t)=>{t.d(E,{A:()=>_});var s=t(92132);const e=D=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...D,children:(0,s.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),_=e},60256:(u,E,t)=>{t.d(E,{pe:()=>_});var s=t(41629);const{Axios:e,AxiosError:_,CanceledError:D,isCancel:M,CancelToken:c,VERSION:d,all:l,Cancel:O,isAxiosError:n,spread:g,toFormData:P,AxiosHeaders:o,HttpStatusCode:m,formToJSON:a,getAdapter:L,mergeConfig:T}=s.A},75866:(u,E,t)=>{t.d(E,{D:()=>M});var s=t(92132),e=t(94061),_=t(92333);function D(c,d,l){if(!c||!d||!l)return{display:"none"};const{x:O,y:n}=l;return{transform:`translate(${O}px, ${n}px)`}}const M=({renderItem:c})=>{const{itemType:d,isDragging:l,item:O,initialOffset:n,currentOffset:g,mouseOffset:P}=(0,_.useDragLayer)(o=>({item:o.getItem(),itemType:o.getItemType(),initialOffset:o.getInitialSourceClientOffset(),currentOffset:o.getSourceClientOffset(),isDragging:o.isDragging(),mouseOffset:o.getClientOffset()}));return l?(0,s.jsx)(e.a,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%",children:(0,s.jsx)(e.a,{style:D(n,g,P),children:c({type:d,item:O})})}):null}},76523:(u,E,t)=>{t.d(E,{B:()=>p,D:()=>W,H:()=>w,R:()=>B});var s=t(92132),e=t(42455),_=t(4198),D=t(55356),M=t(38413),c=t(83997),d=t(30893),l=t(56445),O=t(46270),n=t(9005),g=t(54894),P=t(75866),o=t(80909),m=t(33544),a=t(94929);const L=(0,a.Ay)(c.s)`
  svg path {
    fill: ${({theme:f})=>f.colors.neutral600};
  }
`;function T({name:f}){return(0,s.jsxs)(c.s,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,l.a8)(300),children:[(0,s.jsx)(L,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6,children:(0,s.jsx)(n.A,{width:`${8/16}rem`})}),(0,s.jsx)(d.o,{fontWeight:"bold",children:f})]})}T.propTypes={name:m.string.isRequired};function A({type:f,item:v}){switch(f){case o.D.STAGE:return(0,s.jsx)(T,{...v});default:return null}}function W(){return(0,s.jsx)(P.D,{renderItem:A})}function B({children:f}){return(0,s.jsx)(e.P,{children:(0,s.jsx)(M.g,{tabIndex:-1,children:(0,s.jsx)(_.s,{children:f})})})}function p({href:f}){const{formatMessage:v}=(0,g.A)();return(0,s.jsx)(l.N_,{startIcon:(0,s.jsx)(O.A,{}),to:f,children:v({id:"global.back",defaultMessage:"Back"})})}function w({title:f,subtitle:v,navigationAction:j,primaryAction:I}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.x7,{name:f}),(0,s.jsx)(D.Q,{navigationAction:j,primaryAction:I,title:f,subtitle:v})]})}}}]);
